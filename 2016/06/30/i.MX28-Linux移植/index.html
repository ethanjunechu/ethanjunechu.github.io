<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> i.MX28-Linux移植 · ESERIES</title><meta name="description" content="i.MX28基于Ubuntu12.04的Linux移植"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://eseries.studio/atom.xml" title="ESERIES"><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-41153556-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src ="//hm.baidu.com/hm.js?42f2db0e43e199df29a61b16286ba64d";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="mask" style="display: none;"><img id="mask-image" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" width="0" height="0" style=" "></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/ethanjunechu" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="http://taobao.com/" target="_blank" class="nav-list-link">SHOP</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">i.MX28-Linux移植</h1><div class="post-info">Jun 30, 2016</div><div class="post-content"><p>1-3步均为未成功的例子，可自行忽略从第4步开始</p>
<h3 id="1-确定开发环境为Ubuntu-10-04"><a href="#1-确定开发环境为Ubuntu-10-04" class="headerlink" title="1.确定开发环境为Ubuntu-10.04"></a>1.确定开发环境为Ubuntu-10.04</h3><h3 id="2-更新软件源"><a href="#2-更新软件源" class="headerlink" title="2.更新软件源"></a>2.更新软件源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo gedit /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
<p>在弹出的文本框中将原始内容全部清空，修改成下面的旧源，保存并退出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">deb http://old-releases.ubuntu.com/ubuntu/ natty main restricted universe multiverse</span><br><span class="line">deb http://old-releases.ubuntu.com/ubuntu/ natty-security main restricted universe multiverse</span><br><span class="line">deb http://old-releases.ubuntu.com/ubuntu/ natty-updates main restricted universe multiverse</span><br><span class="line">deb http://old-releases.ubuntu.com/ubuntu/ natty-proposed main restricted universe multiverse</span><br><span class="line">deb http://old-releases.ubuntu.com/ubuntu/ natty-backports main restricted universe multiverse</span><br><span class="line">deb-src http://old-releases.ubuntu.com/ubuntu/ natty main restricted universe multiverse</span><br><span class="line">deb-src http://old-releases.ubuntu.com/ubuntu/ natty-security main restricted universe multiverse</span><br><span class="line">deb-src http://old-releases.ubuntu.com/ubuntu/ natty-updates main restricted universe multiverse</span><br><span class="line">deb-src http://old-releases.ubuntu.com/ubuntu/ natty-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://old-releases.ubuntu.com/ubuntu/ natty-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure></p>
<p>更新源<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br></pre></td></tr></table></figure></p>
<h3 id="3-根据Freescale官方手册MX28-EVK-Linux-User-Guide-pdf步骤安装LTIB"><a href="#3-根据Freescale官方手册MX28-EVK-Linux-User-Guide-pdf步骤安装LTIB" class="headerlink" title="3.根据Freescale官方手册MX28_EVK_Linux_User_Guide.pdf步骤安装LTIB"></a>3.根据Freescale官方手册MX28_EVK_Linux_User_Guide.pdf步骤安装LTIB</h3><h4 id="Install-the-LTIB-package-not-as-root"><a href="#Install-the-LTIB-package-not-as-root" class="headerlink" title="Install the LTIB package not as root:"></a>Install the LTIB package not as root:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ tar zxf &lt;ltib_release&gt;.tar.gz</span><br><span class="line">$ ./&lt;ltib_release&gt;/install</span><br></pre></td></tr></table></figure>
<h4 id="Build-LTIB"><a href="#Build-LTIB" class="headerlink" title="Build LTIB:"></a>Build LTIB:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> &lt;your LTIB directory&gt;</span><br><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>错误提示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">sh: g++: not found</span><br><span class="line"></span><br><span class="line">ltib cannot be run because one or more of the host packages needed to run it</span><br><span class="line">are either missing or out of date or not <span class="keyword">in</span> ltib<span class="string">'s standard path.  Please</span></span><br><span class="line"><span class="string">install/upgrade these packages on your host.  If you have your own utilities</span></span><br><span class="line"><span class="string">in non-standard paths, please add an entry into the .ltibrc file for example:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">%path_std</span></span><br><span class="line"><span class="string">/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/X11R6/bin:/my/own/exes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Package                Minimum ver   Installed info</span></span><br><span class="line"><span class="string">-------                -----------   ---------------</span></span><br><span class="line"><span class="string">libstdc++              0             not installed</span></span><br><span class="line"><span class="string">gcc-c++                2.96          not installed</span></span><br><span class="line"><span class="string">zlib-devel             0             not installed</span></span><br><span class="line"><span class="string">rpm                    0             not installed</span></span><br><span class="line"><span class="string">rpm-build              0             not installed</span></span><br><span class="line"><span class="string">ncurses-devel          0             not installed</span></span><br><span class="line"><span class="string">m4                     0             not installed</span></span><br><span class="line"><span class="string">bison                  0             not installed</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Died at ./ltib line 1409.</span></span><br><span class="line"><span class="string">traceback:</span></span><br><span class="line"><span class="string"> main::host_checks:1409</span></span><br><span class="line"><span class="string">  main:554</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Started: Mon May 16 22:42:49 2016</span></span><br><span class="line"><span class="string">Ended:   Mon May 16 22:42:49 2016</span></span><br><span class="line"><span class="string">Elapsed: 0 seconds</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Build Failed</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Exiting on error or interrupt</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure>
<p>解决办法：<br>根据Freescale官方手册Setting_Up_LTIB_Host_on_Ubuntu_9_04.pdf<br>Install packages needed by LTIB<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Install packages needed by LTIB</span></span><br><span class="line">$ sudo aptitude -y install gettext libgtk2.0-dev rpm bison m4 libfreetype6-dev</span><br><span class="line">$ sudo aptitude -y install libdbus-glib-1-dev liborbit2-dev intltool</span><br><span class="line">$ sudo aptitude -y install ccache ncurses-dev zlib1g zlib1g-dev gcc g++ libtool</span><br><span class="line">$ sudo aptitude -y install uuid-dev liblzo2-dev</span><br><span class="line">$ sudo aptitude -y install tcl dpkg</span><br><span class="line"><span class="comment"># Packages required for 64-bit Ubuntu</span></span><br><span class="line"><span class="comment"># Do "uname -a" and see if the word "x86_64" shows up.</span></span><br><span class="line"><span class="keyword">if</span> uname -a|grep -sq <span class="string">'x86_64'</span>; <span class="keyword">then</span></span><br><span class="line">	    sudo aptitude -y install ia32-libs libc6-dev-i386 lib32z1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># The following recommended for Linux development.</span></span><br><span class="line"><span class="comment"># They are not required by LTIB.</span></span><br><span class="line">$ sudo aptitude -y install gparted emacs22-nox openssh-server</span><br><span class="line">$ sudo aptitude -y install nfs-common nfs-kernel-server lintian</span><br><span class="line">$ sudo aptitude -y install git-core git-doc git-email git-gui gitk</span><br><span class="line">$ sudo aptitude -y install diffstat indent tofrodos fakeroot doxygen uboot-mkimage</span><br><span class="line">$ sudo aptitude -y install sendmail mailutils meld atftpd sharutils</span><br><span class="line">$ sudo aptitude -y install manpages-dev manpages-posix manpages-posix-dev linux-doc</span><br><span class="line">$ sudo aptitude -y install vnc4server xvnc4viewer</span><br></pre></td></tr></table></figure></p>
<p>解决完上面的错误，继续执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure></p>
<p>错误提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">I ran the <span class="built_in">command</span>: sudo -S -l <span class="built_in">which</span> returned:</span><br><span class="line"></span><br><span class="line">[sudo] password <span class="keyword">for</span> ethan: Sorry, try again.</span><br><span class="line">[sudo] password <span class="keyword">for</span> ethan: Sorry, try again.</span><br><span class="line">[sudo] password <span class="keyword">for</span> ethan: Sorry, try again.</span><br><span class="line">sudo: 3 incorrect password attempts</span><br><span class="line"></span><br><span class="line">This means you don<span class="string">'t have sudo permission to execute rpm commands as root</span></span><br><span class="line"><span class="string">without a password.  This is needed for this build script to operate correctly.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To configure this, as root using the command "/usr/sbin/visudo",</span></span><br><span class="line"><span class="string">and add the following line in the User privilege section:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ethan ALL = NOPASSWD: /usr/bin/rpm, /opt/freescale/ltib/usr/bin/rpm</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">traceback:</span></span><br><span class="line"><span class="string"> main::check_sudo_setup:2467</span></span><br><span class="line"><span class="string">  main::host_checks:1413</span></span><br><span class="line"><span class="string">   main:554</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Started: Tue May 31 22:25:48 2016</span></span><br><span class="line"><span class="string">Ended:   Tue May 31 22:25:53 2016</span></span><br><span class="line"><span class="string">Elapsed: 5 seconds</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Build Failed</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Exiting on error or interrupt</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure></p>
<p>解决办法：<br>根据Freescale官方手册Setting_Up_LTIB_Host_on_Ubuntu_9_04.pdf<br>LTIB is executed as a regular user but requires root privileges during execution. To accommodate this, the sudoers file needs to be modified.<br>Run this command to edit the sudoers file:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo visudo</span><br></pre></td></tr></table></figure></p>
<p>Add the following line to the end of the sudoers file.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%admin ALL = NOPASSWD: /usr/bin/rpm, /opt/freescale/ltib/usr/bin/rpm</span><br></pre></td></tr></table></figure></p>
<p>解决完上面的错误，继续执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure></p>
<p>提示是接近一个小时的等待OvO</p>
<p>…<br>…<br>…<br>…<br>…<br>…<br>…</p>
<p>一个小时已经过去，然而并没有完成OvO</p>
<p>…<br>…<br>…<br>…<br>…<br>…<br>…</p>
<p>一个半小时已经过去，我要睡觉了OvO</p>
<p>起床发现还是不行，打开log文件发现<br>Updating lpp from local packages</p>
<p>错误提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Updating lpp from <span class="built_in">local</span> packages</span><br><span class="line"></span><br><span class="line">Processing platform: Host support packages</span><br><span class="line">============================================</span><br><span class="line">using /home/ethan/ltib/config/platform/host/ltib.preconfig</span><br><span class="line"></span><br><span class="line">Processing: fake-provides</span><br><span class="line">===========================</span><br><span class="line"></span><br><span class="line">Processing: mkspooflinks</span><br><span class="line">==========================</span><br><span class="line">Build path taken because: directory build,</span><br><span class="line"></span><br><span class="line">Cowardly refusing to clobber existing directory:</span><br><span class="line"> /opt/freescale/ltib/usr/src/rpm/BUILD/mkspooflinks-3.4</span><br><span class="line">Remove this by hand <span class="keyword">if</span> you really want to rebuild this package from scratch</span><br><span class="line"></span><br><span class="line">Died at ./ltib line 1392.</span><br><span class="line">traceback:</span><br><span class="line"> main::build_host_rpms:1392</span><br><span class="line">  main::host_checks:1447</span><br><span class="line">   main:554</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Started: Thu Jun 23 18:48:59 2016</span><br><span class="line">Ended:   Thu Jun 23 18:49:00 2016</span><br><span class="line">Elapsed: 1 seconds</span><br><span class="line"></span><br><span class="line">These packages failed to build:</span><br><span class="line">mkspooflinks</span><br><span class="line"></span><br><span class="line">Build Failed</span><br><span class="line">------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></p>
<p>解决办法：<br>oh，跟我预想一样，安装在Mac共享文件夹下是不行的<br>换到Ubuntu本地，继续执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure></p>
<p>错误提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Processing: mtd-utils</span><br><span class="line">=======================</span><br><span class="line">Build path taken because: no prebuilt rpm,</span><br><span class="line">Try mtd-utils-1.5.0.tar.gz.md5 from the GPP</span><br><span class="line">http://bitshrine.org/gpp/mtd-utils-1.5.0.tar.gz.md5:</span><br><span class="line">19:05:31 ERROR 404: Not Found.</span><br><span class="line">Try mtd-utils-1.5.0.tar.gz from the GPP</span><br><span class="line">http://bitshrine.org/gpp/mtd-utils-1.5.0.tar.gz:</span><br><span class="line">19:05:31 ERROR 404: Not Found.</span><br><span class="line">Can<span class="string">'t get: mtd-utils-1.5.0.tar.gz at ./ltib line 802.</span></span><br><span class="line"><span class="string">Died at ./ltib line 1392.</span></span><br><span class="line"><span class="string">traceback:</span></span><br><span class="line"><span class="string"> main::build_host_rpms:1392</span></span><br><span class="line"><span class="string">  main::host_checks:1447</span></span><br><span class="line"><span class="string">   main:554</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Started: Thu Jun 23 18:58:07 2016</span></span><br><span class="line"><span class="string">Ended:   Thu Jun 23 19:05:31 2016</span></span><br><span class="line"><span class="string">Elapsed: 444 seconds</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">These packages failed to build:</span></span><br><span class="line"><span class="string">mtd-utils</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure></p>
<p>解决办法：<br>初步断定是源不行了，经过一天的摸索，替换源什么的都试了，过程中太多包找不到了，后来偶然发现下载的L2.6.35_1.1.0_130130_source里面有pkgs，也是醉了…原来还是共享文件夹的问题<br>删除opt/freescale文件夹<br>L2.6.35_1.1.0_130130_source拷贝到Ubuntu下，重新执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./&lt;ltib_release&gt;/install</span><br><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure></p>
<h4 id="Select-the-platform-as-“Freescale-iMX-reference-boards”-and-exit-after-saving-the-changes-In-the-next-menu-select-“mx28”-as-platform-type-and-select-a-package-profile-Profiles-min-test-and-fsl-gnome-have-been-tested-Exit-after-saving-changes"><a href="#Select-the-platform-as-“Freescale-iMX-reference-boards”-and-exit-after-saving-the-changes-In-the-next-menu-select-“mx28”-as-platform-type-and-select-a-package-profile-Profiles-min-test-and-fsl-gnome-have-been-tested-Exit-after-saving-changes" class="headerlink" title="Select the platform as “Freescale iMX reference boards” and exit after saving the changes. In the next menu, select “mx28” as platform type and select a package profile. Profiles min, test, and fsl gnome have been tested. Exit after saving changes."></a>Select the platform as “Freescale iMX reference boards” and exit after saving the changes. In the next menu, select “mx28” as platform type and select a package profile. Profiles min, test, and fsl gnome have been tested. Exit after saving changes.</h4><h4 id="这里gcc需要选择4-4-4的版本"><a href="#这里gcc需要选择4-4-4的版本" class="headerlink" title="这里gcc需要选择4.4.4的版本"></a>这里gcc需要选择4.4.4的版本</h4><p>错误提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Processing platform: Freescale iMX28 Based Boards</span><br><span class="line">===================================================</span><br><span class="line">using config/platform/imx/.config</span><br><span class="line"></span><br><span class="line">Processing: fake-provides</span><br><span class="line">===========================</span><br><span class="line"></span><br><span class="line">Processing: u-boot</span><br><span class="line">====================</span><br><span class="line">Build path taken because: directory build, no prebuilt rpm,</span><br><span class="line">scbuild/scdeploy already unpacked package</span><br><span class="line"></span><br><span class="line">Processing: u-boot</span><br><span class="line">====================</span><br><span class="line">Build path taken because: directory build, build key <span class="built_in">set</span>, no prebuilt rpm,</span><br><span class="line"></span><br><span class="line">rpmbuild --dbpath /home/ethan/ltib/rootfs//var/lib/rpm --target arm --define <span class="string">'_unpackaged_files_terminate_build 0'</span> --define <span class="string">'_target_cpu arm'</span> --define <span class="string">'__strip strip'</span> --define <span class="string">'_topdir /home/ethan/ltib/rpm'</span> --define <span class="string">'_prefix /usr'</span> --define <span class="string">'_tmppath /home/ethan/ltib/tmp'</span> --define <span class="string">'_rpmdir /home/ethan/ltib/rpm/RPMS'</span>  --define <span class="string">'_mandir /usr/share/man'</span> --define <span class="string">'_sysconfdir /etc'</span> --define <span class="string">'_localstatedir /var'</span> -bc --short-circuit  /home/ethan/ltib/tmp/u-boot.spec</span><br><span class="line">Building target platforms: arm</span><br><span class="line">Building <span class="keyword">for</span> target arm</span><br><span class="line">Executing(%build): /bin/sh -e /home/ethan/ltib/tmp/rpm-tmp.93639</span><br><span class="line">+ <span class="built_in">umask</span> 022</span><br><span class="line">+ <span class="built_in">cd</span> /home/ethan/ltib/rpm/BUILD</span><br><span class="line">+ <span class="built_in">cd</span> u-boot-2009.08</span><br><span class="line">+ : mx28_evk_config</span><br><span class="line">+ <span class="built_in">eval</span> <span class="built_in">echo</span></span><br><span class="line">+ <span class="built_in">echo</span></span><br><span class="line">+ PKG_U_BOOT_PATH_PRECONFIG=</span><br><span class="line">+ SRC_DIR=/home/ethan/ltib/rpm/BUILD/u-boot-2009.08</span><br><span class="line">+ BUILD_DIR=/home/ethan/ltib/rpm/BUILD/u-boot-2009.08</span><br><span class="line">+ [ /home/ethan/ltib/rpm/BUILD/u-boot-2009.08 != /home/ethan/ltib/rpm/BUILD/u-boot-2009.08 ]</span><br><span class="line">+ <span class="built_in">cd</span> /home/ethan/ltib/rpm/BUILD/u-boot-2009.08</span><br><span class="line">+ [ -n  ]</span><br><span class="line">+ make HOSTCC=ccache /usr/bin/gcc -B/usr/bin/ CROSS_COMPILE=arm-none-linux-gnueabi- O=/home/ethan/ltib/rpm/BUILD/u-boot-2009.08 mx28_evk_config</span><br><span class="line">make: *** No rule to make target `mx28_evk_config<span class="string">'.  Stop.</span></span><br><span class="line"><span class="string">error: Bad exit status from /home/ethan/ltib/tmp/rpm-tmp.93639 (%build)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">RPM build errors:</span></span><br><span class="line"><span class="string">    Bad exit status from /home/ethan/ltib/tmp/rpm-tmp.93639 (%build)</span></span><br><span class="line"><span class="string">Build time for u-boot: 0 seconds</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Failed building u-boot</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">f_buildrpms() returned an error, exiting</span></span><br><span class="line"><span class="string">traceback:</span></span><br><span class="line"><span class="string"> main:572</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Started: Sun Jul  3 01:34:21 2016</span></span><br><span class="line"><span class="string">Ended:   Sun Jul  3 01:35:33 2016</span></span><br><span class="line"><span class="string">Elapsed: 72 seconds</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">These packages failed to build:</span></span><br><span class="line"><span class="string">u-boot</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Build Failed</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Exiting on error or interrupt</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure></p>
<p>解决办法<br>nxp的论坛里面给出了解决方法，由于我重新在12.04上搭建环境，所以没有尝试<br><a href="https://community.nxp.com/thread/303737" target="_blank" rel="noopener">https://community.nxp.com/thread/303737</a></p>
<h3 id="4-重新确定开发环境为Ubuntu-12-04"><a href="#4-重新确定开发环境为Ubuntu-12-04" class="headerlink" title="4.重新确定开发环境为Ubuntu-12.04"></a>4.重新确定开发环境为Ubuntu-12.04</h3><h3 id="5-根据-https-community-nxp-com-docs-DOC-98909-进行配置"><a href="#5-根据-https-community-nxp-com-docs-DOC-98909-进行配置" class="headerlink" title="5.根据 https://community.nxp.com/docs/DOC-98909 进行配置"></a>5.根据 <a href="https://community.nxp.com/docs/DOC-98909" target="_blank" rel="noopener">https://community.nxp.com/docs/DOC-98909</a> 进行配置</h3><h4 id="安装需要的包"><a href="#安装需要的包" class="headerlink" title="安装需要的包"></a>安装需要的包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install gettext libgtk2.0-dev rpm bison m4 libfreetype6-dev</span><br><span class="line">$ sudo apt-get install libdbus-glib-1-dev liborbit2-dev intltool</span><br><span class="line">$ sudo apt-get install ccache ncurses-dev zlib1g zlib1g-dev gcc g++ libtool</span><br><span class="line">$ sudo apt-get install uuid-dev liblzo2-dev</span><br><span class="line">$ sudo apt-get install tcl dpkg</span><br><span class="line">$ sudo apt-get install asciidoc texlive-latex-base dblatex xutils-dev</span><br><span class="line">$ sudo apt-get install texlive texinfo</span><br><span class="line">$ sudo apt-get install ia32-libs libc6-dev-i386 lib32z1</span><br><span class="line">$ sudo apt-get install uboot-mkimage</span><br><span class="line">$ sudo apt-get install scrollkeeper</span><br><span class="line">$ sudo apt-get install gparted</span><br><span class="line">$ sudo apt-get install nfs-common nfs-kernel-server</span><br><span class="line">$ sudo apt-get install git-core git-doc git-email git-gui gitk</span><br><span class="line">$ sudo apt-get install meld atftpd</span><br></pre></td></tr></table></figure>
<h4 id="解压安装LTIB"><a href="#解压安装LTIB" class="headerlink" title="解压安装LTIB"></a>解压安装LTIB</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ tar -zxvf L2.6.35_1.1.0_130130_source.tar.gz</span><br><span class="line">$ ./L2.6.35_1.1.0_130130_source/install</span><br></pre></td></tr></table></figure>
<h4 id="安装12-04补丁0001-make-L2-6-35-1-1-0-130130-compile-on-ubuntu-12-04-64bit-OS-patch"><a href="#安装12-04补丁0001-make-L2-6-35-1-1-0-130130-compile-on-ubuntu-12-04-64bit-OS-patch" class="headerlink" title="安装12.04补丁0001_make_L2.6.35_1.1.0_130130_compile_on_ubuntu_12.04_64bit_OS.patch"></a>安装12.04补丁<a href="https://community.nxp.com/servlet/JiveServlet/download/98909-4-268680/0001_make_L2.6.35_1.1.0_130130_compile_on_ubuntu_12.04_64bit_OS.patch.zip" target="_blank" rel="noopener">0001_make_L2.6.35_1.1.0_130130_compile_on_ubuntu_12.04_64bit_OS.patch</a></h4><p>解压拷贝到~/ltib下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/ltib</span><br><span class="line">$ git apply 0001_make_L2.6.35_1.1.0_130130_compile_on_ubuntu_12.04_64bit_OS.patch</span><br></pre></td></tr></table></figure></p>
<h4 id="预配置然后安装"><a href="#预配置然后安装" class="headerlink" title="预配置然后安装"></a>预配置然后安装</h4><h4 id="这里gcc需要选择4-4-4的版本-1"><a href="#这里gcc需要选择4-4-4的版本-1" class="headerlink" title="这里gcc需要选择4.4.4的版本"></a>这里gcc需要选择4.4.4的版本</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/ltib</span><br><span class="line">$ ./ltib -m config</span><br><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure>
<h3 id="6-等待半小时左右，提示以下内容就成功了"><a href="#6-等待半小时左右，提示以下内容就成功了" class="headerlink" title="6.等待半小时左右，提示以下内容就成功了"></a>6.等待半小时左右，提示以下内容就成功了</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Processing deployment operations</span><br><span class="line">==================================</span><br><span class="line">making filesystem image file</span><br><span class="line">staging directory is /home/ethan/ltib/rootfs.tmp</span><br><span class="line">removing the boot directory and files</span><br><span class="line">removing man files and directories</span><br><span class="line">removing info files</span><br><span class="line">removing /usr/share/locale directory</span><br><span class="line">removing static libraries</span><br><span class="line">removing target rpm database</span><br><span class="line">stripping binaries and libraries</span><br><span class="line"></span><br><span class="line">Filesystem stats, including padding:</span><br><span class="line"></span><br><span class="line">    Total size            = 14936k</span><br><span class="line">    Total number of files = 1295</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Started: Mon Jul  4 21:49:45 2016</span><br><span class="line">Ended:   Mon Jul  4 22:11:17 2016</span><br><span class="line">Elapsed: 1292 seconds</span><br><span class="line"></span><br><span class="line">Build Succeeded</span><br><span class="line">------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<p>在~/ltib/rootfs/boot/下面会生成以下固件<br><img src="../i.MX28-Linux移植/结果.jpg" alt="结果"></p>
</div></article></div><p style="text-align:center"><a href="" class="donate-link"><img src="/donate.png" alt="donate" width="50%"></a></p></main><footer><div class="paginator"><a href="/2017/11/29/表盘校准设计系统/" class="prev">PREV</a><a href="/2016/05/01/BALI-2015/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'eseries';
var disqus_identifier = '2016/06/30/i.MX28-Linux移植/';
var disqus_title = 'i.MX28-Linux移植';
var disqus_url = 'http://eseries.studio/2016/06/30/i.MX28-Linux移植/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//eseries.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 - 2018 <a href="http://eseries.studio">Ethan</a>, unless otherwise noted.</p></div></footer></div></body></html>