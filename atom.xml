<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ESERIES</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://eseries.studio/"/>
  <updated>2018-03-22T02:08:40.000Z</updated>
  <id>http://eseries.studio/</id>
  
  <author>
    <name>Ethan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>硬件开发规范化管理</title>
    <link href="http://eseries.studio/2018/03/13/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%8C%96%E7%AE%A1%E7%90%86/"/>
    <id>http://eseries.studio/2018/03/13/硬件开发规范化管理/</id>
    <published>2018-03-13T09:21:13.000Z</published>
    <updated>2018-03-22T02:08:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>正在从《华为硬件工程师手册》整理。。。</p><a id="more"></a><ul><li><strong>硬件需求分析</strong><br><div class="tip"><br><p><br>1.<strong>《硬件需求说明书》</strong> —— 硬件需求说明书是描写硬件开发目标，基本功能、基本配置，主要性能指标、运行环境，约束条件以及开发经费和进度等要求，它的要求依据是产品规格说明书和系统需求说明书。它是硬件总体设计和制订硬件开发计划的依据，具体编写的内容有：系统工程组网及使用说明、硬件整体系统的基本功能和主要性能指标、硬件分系统的基本功能和主要性能指标以及功能模块的划分等。<br></p><br></div><ul><li>系统工程组网及使用说明</li><li>基本配置及其互连方法</li><li>运行环境</li><li>硬件整体系统的基本功能和主要性能指标</li><li>硬件分系统的基本功能和主要功能指标</li><li>功能模块的划分</li><li>关键技术的攻关</li><li>外购硬件的名称型号、生产单位、主要技术指标</li><li>主要仪器设备</li><li>内部合作，对外合作，国内外同类产品硬件技术介绍</li><li>可靠性、稳定性、电磁兼容讨论</li><li>电源、工艺结构设计</li><li>硬件测试方案</li></ul></li><li><strong>硬件系统设计</strong><br><div class="tip"><br><p><br>2.<strong>《硬件总体设计报告》</strong> —— 硬件总体设计报告是根据需求说明书的要求进行总体设计后出的报告，它是硬件详细设计的依据。编写硬件总体设计报告应包含以下内容：系统总体结构及功能划分，系统逻辑框图、组成系统各功能模块的逻辑框图，电路结构图及单板组成，单板逻辑框图和电路结构图，以及可靠性、安全性、电磁兼容性讨论和硬件测试方案等。<br></p><p><br></p><p><br>3.<strong>《单板总体设计方案》</strong> —— 在单板的总体设计方案定下来之后应出这份文档，单板总体设计方案应包含单板版本号，单板在整机中的位置、开发目的及主要功能，单板功能描述、单板逻辑框图及各功能模块说明，单板软件功能描述及功能模块划分、接口简单定义与相关板的关系，主要性能指标、功耗和采用标准。<br></p><br></div><ul><li>硬件总体设计<ul><li><em>系统功能及功能指标</em></li><li><em>系统总体结构图及功能划分</em></li><li><em>单板命名</em></li><li><em>系统逻辑框图</em></li><li><em>组成系统各功能块的逻辑框图，电路结构图及单板组成</em></li><li><em>单板逻辑框图和电路结构图</em></li><li><em>关键技术讨论</em></li><li><em>关键器件</em></li></ul></li><li>单板总体设计<ul><li><em>单板在整机中的的位置：单板功能描述</em></li><li><em>单板尺寸</em></li><li><em>单板逻辑图及各功能模块说明</em></li><li><em>单板软件功能描述</em></li><li><em>单板软件功能模块划分</em></li><li><em>接口定义及与相关板的关系</em></li><li><em>重要性能指标、功耗及采用标准</em></li><li><em>开发用仪器仪表等</em></li></ul></li></ul></li><li><strong>硬件开发及过程控制</strong><br><div class="tip"><br><p><br>4.<strong>《单板硬件详细设计》</strong> —— 在单板硬件进入到详细设计阶段，应提交单板硬件详细设计报告。在单板硬件详细设计中应着重体现：单板逻辑框图及各功能模块详细说明，各功能模块实现方式、地址分配、控制方式、接口方式、存贮器空间、中断方式、接口管脚信号详细定义、时序说明、性能指标、指示灯说明、外接线定义、可编程器件图、功能模块说明、原理图、详细物料清单以及单板测试、调试计划。有时候一块单板的硬件和软件分别由两个开发人员开发，因此这时候单板硬件详细设计便为软件设计者提供了一个详细的指导，因此单板硬件详细设计报告至关重要。尤其是地址分配、控制方式、接口方式、中断方式是编制单板软件的基础，一定要详细写出。<br></p><br><p><br>5.<strong>《单板软件详细设计》</strong> —— 在单板软件设计完成后应相应完成单板软件详细设计报告，在报告中应列出完成单板软件的编程语言，编译器的调试环境，硬件描述与功能要求及数据结构等。要特别强调的是：要详细列出详细的设计细节，其中包括中断、主程序、子程序的功能、入口参数、出口参数、局部变量、函数调用和流程图。在有关通讯协议的描述中，应说明物理层，链路层通讯协议和高层通讯协议由哪些文档定义。<br></p><br><p><br>6.<strong>《单板硬件过程调试文档》</strong> —— 开发过程中，每次所投 PCB 板，工程师应提交一份过程文档，以便管理阶层了解进度，进行考评，另外也给其他相关工程师留下一份有参考价值的技术文档。每次所投 PCB 板时 应制作此文档。这份文档应包括以下内容：单板硬件功能模块划分，单板硬件各模块调试进度，调试中出现的问题及解决方法，原始数据记录、系统方案修改说明、单板方案修改说明、器件改换说明、原理图、PCB 图修改说明、可编程器件修改说明、调试工作阶段总结、调试进展说明、下阶段调试计划以及测试方案的修改。<br></p><br><p><br>7.<strong>《单板软件过程调试文档》</strong> —— 每月收集一次单板软件过程调试文档，或调试完毕(指不满一月)收集，尽可能清楚，完整列出软件调试修改过程。单板软件过程调试文档应当包括以下内容：单板软件功能模块划分及各功能模块调试进度、单板软件调试出现问题及解决、下阶段的调试计划、测试方案修改。<br></p><br></div><ul><li>单板详细设计（<code>单板整体功能的准确描述和模块的精心划分 &amp;&amp; 接口的详细设计 &amp;&amp; 关键元器件的功能描述及评审，元器件的选择 &amp;&amp; 符合规范的原理图及 PCB 图 &amp;&amp; 对 PCB 板的测试及调试计划</code>）<ul><li><em>单板软件详细设计</em></li><li><em>单板硬件详细设计</em></li></ul></li></ul></li><li><strong>系统联调</strong><div class="tip"><br><p><br>8.<strong>《单板系统联调报告》</strong> —— 在项目进入单板系统联调阶段，应出单板系统联调报告。单板系统联调报告包括这些内容：系统功能模块划分、系统功能模块调试进展、系统接口信号的测试原始记录及分析、系统联调中出现问题及解决、调试技巧集锦、整机性能评估等。<br></p><br><p><br>9.<strong>《单板硬件测试文档》</strong> —— 在单板调试完之后，申请内部验收之前，应先进行自测以确保每个功能都能实现，每项指标都能满足。自测完毕应出单板硬件测试文档，单板硬件测试文档包括以下内容：单板功能模块划分、各功能模块设计输入输出信号及性能参数、各功能模块测试点确定、各测试参考点实测原始记录及分析、板内高速信号线测试原始记录及分析、系统 I/O 口信号线测试原始记录及分析，整板性能测试结果分析。<br></p><br></div></li><li><strong>文档归档及验收申请</strong><div class="tip"><br><p><br>10.<strong>《单板硬件归档详细文档》</strong><br></p><br><p><br>11.<strong>《单板软件归档详细文档》</strong><br></p><br><p><br>12.<strong>《硬件总体方案归档详细文档》</strong><br></p><br><p><br>13.<strong>《硬件单板总体方案归档详细文档》</strong><br></p><br><p><br>14.<strong>《硬件信息库》</strong> —— 为了共享技术资料，我们希望建立一个共享资料库，每一块单板都希望将的最有价值最有特色的资料归入此库。硬件信息库包括以下内容：典型应用电路、特色电路、特色芯片技术介绍、特色芯片的使用说明、驱动程序的流程图、源程序、相关硬件电路说明、PCB 布板注意事项、单板调试中出现的典型及解决、软硬件设计及调试技巧。<br></p><br></div></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;正在从《华为硬件工程师手册》整理。。。&lt;/p&gt;
    
    </summary>
    
    
      <category term="硬件" scheme="http://eseries.studio/tags/%E7%A1%AC%E4%BB%B6/"/>
    
      <category term="开发" scheme="http://eseries.studio/tags/%E5%BC%80%E5%8F%91/"/>
    
      <category term="规范化" scheme="http://eseries.studio/tags/%E8%A7%84%E8%8C%83%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>给 GitHub Pages 上的 Hexo Blog 使用阿里云的免费 SSL 证书</title>
    <link href="http://eseries.studio/2017/12/19/%E7%BB%99%20GitHub%20Pages%20%E4%B8%8A%E7%9A%84%20Hexo%20Blog%20%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91%E7%9A%84%E5%85%8D%E8%B4%B9%20SSL%20%E8%AF%81%E4%B9%A6/"/>
    <id>http://eseries.studio/2017/12/19/给 GitHub Pages 上的 Hexo Blog 使用阿里云的免费 SSL 证书/</id>
    <published>2017-12-19T03:15:13.000Z</published>
    <updated>2017-12-19T07:26:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>不好意思，你不安全！<br><img src="../../../../../2017/12/19/给 GitHub Pages 上的 Hexo Blog 使用阿里云的免费 SSL 证书/screenshot_1.png" alt="screenshot_1.png"><br>为了安全，我们只有给自己的Blog加上证书，阿里云有一年期的免费个人证书，那当然是硬气的用它🙃<br><a id="more"></a></p><h4 id="1-申请证书"><a href="#1-申请证书" class="headerlink" title="1.申请证书"></a>1.申请证书</h4><p>登录：阿里云控制台 –&gt; 产品与服务 –&gt; 证书服务 –&gt; 购买证书<br>购买：证书类型选择 –&gt; 免费型 DV SSL –&gt; 然后完成购买<br><img src="../../../../../2017/12/19/给 GitHub Pages 上的 Hexo Blog 使用阿里云的免费 SSL 证书/screenshot_2.png" alt="screenshot_2.png"><br>补全：在 <code>我的证书</code> 控制台，找到购买的证书，在操作栏里选择 <code>补全</code> 填写证书相关信息<br>域名验证：可以选择 DNS ，如果域名用了阿里云的 DNS 服务，再勾选一下 证书绑定的域名在阿里云的云解析<br>上传：系统生成 CSR ，创建证书<br>提交审核<br>如果一切正常，10分钟左右，申请的证书就会审核通过<br>在域名的管理里，因为我用了阿里云的 DNS 解析服务，所以会自动添加一条 CNAME 记录，这条记录就是验证域名所有权用的</p><h4 id="2-下载证书"><a href="#2-下载证书" class="headerlink" title="2.下载证书"></a>2.下载证书</h4><p>在阿里云的证书管理那里，如果申请的证书审核通过，你就可以下载了，可以选择不同的类型，我选择的 NGINX 服务器，解压以后，你会得到两个文件一个是 <em>.key，一个是 </em>.pem<br><img src="../../../../../2017/12/19/给 GitHub Pages 上的 Hexo Blog 使用阿里云的免费 SSL 证书/screenshot_3.png" alt="screenshot_3.png"></p><h4 id="3-Netlify-配置"><a href="#3-Netlify-配置" class="headerlink" title="3.Netlify 配置"></a>3.Netlify 配置</h4><p>注册一个 Netlify 帐号，地址 <a href="https://app.netlify.com/signup" target="_blank" rel="noopener">Netlify App</a> 选择用 GitHub 注册就好了<br>添加一个新的站点，在 Domain management 中设置自己的域名，我这里设置成 <a href="eseries.studio">eseries.studio</a><br>然后根据 Netlify 的提示设置好阿里云的 DNS 解析服务<br>最后上传证书，这里需要注意以下配置</p><ul><li>Certificate ：填写 *.pem 第一段<blockquote><p> 从第一个 —–BEGIN CERTIFICATE—– 到第一个 —–END CERTIFICATE—– 结束</p></blockquote></li><li>Private key ：填写 *.key 全部内容</li><li>Intermediate certs ：填写 *.pem 第二段<blockquote><p> 从第二个 —–BEGIN CERTIFICATE—– 到第二个 —–END CERTIFICATE—– 结束</p></blockquote></li></ul><p><img src="../../../../../2017/12/19/给 GitHub Pages 上的 Hexo Blog 使用阿里云的免费 SSL 证书/screenshot_4.png" alt="screenshot_4.png"></p><p><br></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;不好意思，你不安全！&lt;br&gt;&lt;img src=&quot;../../../../../2017/12/19/给 GitHub Pages 上的 Hexo Blog 使用阿里云的免费 SSL 证书/screenshot_1.png&quot; alt=&quot;screenshot_1.png&quot;&gt;&lt;br&gt;为了安全，我们只有给自己的Blog加上证书，阿里云有一年期的免费个人证书，那当然是硬气的用它🙃&lt;br&gt;
    
    </summary>
    
    
      <category term="GitHub" scheme="http://eseries.studio/tags/GitHub/"/>
    
      <category term="Pages" scheme="http://eseries.studio/tags/Pages/"/>
    
      <category term="Hexo" scheme="http://eseries.studio/tags/Hexo/"/>
    
      <category term="Blog" scheme="http://eseries.studio/tags/Blog/"/>
    
      <category term="SSL" scheme="http://eseries.studio/tags/SSL/"/>
    
      <category term="https" scheme="http://eseries.studio/tags/https/"/>
    
      <category term="证书" scheme="http://eseries.studio/tags/%E8%AF%81%E4%B9%A6/"/>
    
      <category term="阿里云" scheme="http://eseries.studio/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>实现用户管理springboot+react+dva+antd</title>
    <link href="http://eseries.studio/2017/12/15/%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86springboot+react+dva+antd/"/>
    <id>http://eseries.studio/2017/12/15/实现用户管理springboot+react+dva+antd/</id>
    <published>2017-12-15T08:10:13.000Z</published>
    <updated>2017-12-19T07:17:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../../../../../2017/12/15/实现用户管理springboot+react+dva+antd/screenshot_1.png" alt="screenshot_1.png"></p><hr><p>结合了两位大神的文章，使用 springboot + react + dva + antd 快速实现 CURD 应用，包含后台数据服务，前端查询、编辑、删除、创建以及分页处理，数据 mock ，自动处理 loading 状态等。<a id="more"></a></p><h3 id="1-新建-Spring-Boot-项目"><a href="#1-新建-Spring-Boot-项目" class="headerlink" title="1.新建 Spring Boot 项目"></a>1.新建 Spring Boot 项目</h3><p>我用的是 eclipse，先在 eclipse marketplace 里面安装 Spring Tools ，然后新建 Spring Starter Project。<br><img src="../../../../../2017/12/15/实现用户管理springboot+react+dva+antd/screenshot_2.png" alt="screenshot_2.png"><br>选择要使用的组件，这里我选了 Mybitis 和 MySQL ，后期要添加其他组件去 pom.xml 添加即可。<br><img src="../../../../../2017/12/15/实现用户管理springboot+react+dva+antd/screenshot_3.png" alt="screenshot_3.png"></p><h3 id="2-在-application-properties-文件中添加-Mybitis-和-MySQL-的配置"><a href="#2-在-application-properties-文件中添加-Mybitis-和-MySQL-的配置" class="headerlink" title="2.在 application.properties 文件中添加 Mybitis 和 MySQL 的配置"></a>2.在 application.properties 文件中添加 Mybitis 和 MySQL 的配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># ############################################# MySQL 配置 ############################################</span><br><span class="line">spring.datasource.url=jdbc:mysql://127.0.0.1:3306/OMS?useUnicode=true&amp;characterEncoding=UTF-8</span><br><span class="line">spring.datasource.username=root</span><br><span class="line">spring.datasource.password=123</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.jdbc.Driver</span><br><span class="line"># ############################################# MySQL 配置 ############################################</span><br><span class="line"></span><br><span class="line"># ############################################# Mybatis 配置 ##########################################</span><br><span class="line">#mybatis.config-location=classpath:mybatis-config.xml</span><br><span class="line"></span><br><span class="line"># 不写 mybatis-config.xml 这个配置文件时可以用下面的配置</span><br><span class="line">mybatis.type-aliases-package=com.ethan.oms_springboot.User</span><br><span class="line">mybatis.mapper-locations=classpath:mybatis-mapper/*.xml</span><br><span class="line"># ############################################# Mybatis 配置 ##########################################</span><br></pre></td></tr></table></figure><h3 id="3-新建-Class-amp-DAO-amp-Controller"><a href="#3-新建-Class-amp-DAO-amp-Controller" class="headerlink" title="3.新建 Class &amp; DAO &amp; Controller"></a>3.新建 Class &amp; DAO &amp; Controller</h3><p>创建完之后项目文件大概长这样<br><img src="../../../../../2017/12/15/实现用户管理springboot+react+dva+antd/screenshot_4.png" alt="screenshot_4.png"><br>编辑 UserDO<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ethan.oms_springboot.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDO</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">7572697046940288333L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String permission;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getusername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setusername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getpermission</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> permission;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setname</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>编辑 UserMapper<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ethan.oms_springboot.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"><span class="function">UserDO <span class="title">selectPersonById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;UserDO&gt; <span class="title">selectAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(UserDO userDO)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Long <span class="title">update</span><span class="params">(UserDO userDO)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Long <span class="title">delete</span><span class="params">(Long id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>编辑 Mybitis 的 UserMapper.xml ，这个文件主要就是MySQL的语句<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.ethan.oms_springboot.User.UserMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insert"</span> <span class="attr">parameterType</span>=<span class="string">"UserDO"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">        INSERT INTO users(username,name) VALUES(#&#123;username&#125;,#&#123;name&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"update"</span> <span class="attr">parameterType</span>=<span class="string">"UserDO"</span>&gt;</span></span><br><span class="line">        UPDATE users SET username=#&#123;username&#125;,name=#&#123;name&#125; WHERE id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"delete"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.Long"</span>&gt;</span></span><br><span class="line">        DELETE FROM users WHERE id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectPersonById"</span> <span class="attr">resultType</span>=<span class="string">"UserDO"</span>&gt;</span></span><br><span class="line">        select * from users where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectAll"</span> <span class="attr">resultType</span>=<span class="string">"UserDO"</span>&gt;</span></span><br><span class="line">        SELECT id, username, name, permission FROM users</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>编辑 UserController<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ethan.oms_springboot.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ethan.oms_springboot.User.UserDO;</span><br><span class="line"><span class="keyword">import</span> com.ethan.oms_springboot.User.UserMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        UserDO userDO = <span class="keyword">new</span> UserDO();</span><br><span class="line">        userDO.setusername(<span class="string">"test101"</span>);</span><br><span class="line">        userDO.setname(<span class="string">"唐伯虎"</span>);</span><br><span class="line">        userMapper.insert(userDO);</span><br><span class="line">        <span class="keyword">return</span> userDO.getId();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    UserDO userDO = <span class="keyword">new</span> UserDO();</span><br><span class="line">    userDO.setId(<span class="string">"3"</span>);</span><br><span class="line">    userDO.setusername(<span class="string">"test101"</span>);</span><br><span class="line">    userDO.setname(<span class="string">"唐伯虎"</span>);</span><br><span class="line">        <span class="keyword">return</span> userMapper.update(userDO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/delete"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.delete(<span class="number">10L</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/selectById"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDO <span class="title">selectById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.selectPersonById(<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/users"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;UserDO&gt; <span class="title">selectAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> userMapper.selectAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="4-运行测试后台"><a href="#4-运行测试后台" class="headerlink" title="4.运行测试后台"></a>4.运行测试后台</h3><p>写完以上应该可以通过 <a href="http://127.0.0.1:8080" target="_blank" rel="noopener">http://127.0.0.1:8080</a> 访 MySQL 问数据库了</p><h3 id="5-安装-dva-cli-并创建前端应用"><a href="#5-安装-dva-cli-并创建前端应用" class="headerlink" title="5.安装 dva-cli 并创建前端应用"></a>5.安装 dva-cli 并创建前端应用</h3><p>先安装 dva-cli，并确保版本是 0.7.x<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm i dva-cli@0.7 -g</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> dva -v</span></span><br><span class="line">0.7.0</span><br></pre></td></tr></table></figure></p><p>然后创建应用(项目路径就是oms)<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dva new oms</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> oms</span></span><br></pre></td></tr></table></figure></p><h3 id="6-配置-antd-和-babel-plugin-import"><a href="#6-配置-antd-和-babel-plugin-import" class="headerlink" title="6.配置 antd 和 babel-plugin-import"></a>6.配置 antd 和 babel-plugin-import</h3><p>babel-plugin-import 用于引入 antd 的 JavaScript 和 CSS，可以实现按需加载，打包时会小一点<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm i antd --save</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm i babel-plugin-import --save-dev</span></span><br></pre></td></tr></table></figure></p><p>修改 .roadhogrc，在 “extraBabelPlugins” 里加上：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">["import", &#123; "libraryName": "antd", "style": "css" &#125;]</span><br></pre></td></tr></table></figure></p><h3 id="7-配置代理，能通过-RESTFul-的方式访问-http-localhost-8000-api-users"><a href="#7-配置代理，能通过-RESTFul-的方式访问-http-localhost-8000-api-users" class="headerlink" title="7.配置代理，能通过 RESTFul 的方式访问 http://localhost:8000/api/users"></a>7.配置代理，能通过 RESTFul 的方式访问 <a href="http://localhost:8000/api/users" target="_blank" rel="noopener">http://localhost:8000/api/users</a></h3><p>修改 .roadhogrc，加上 “proxy” 配置：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">"proxy": &#123;</span><br><span class="line">  "/api": &#123;</span><br><span class="line">    "target": "http://127.0.0.1:8080",</span><br><span class="line">    "changeOrigin": true,</span><br><span class="line">    "pathRewrite": &#123; "^/api" : "" &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>然后启动应用：(这个命令一直开着，后面不需要重启，会自动刷新)<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm start</span></span><br></pre></td></tr></table></figure></p><p>浏览器会自动打开 <a href="http://localhost:8000" target="_blank" rel="noopener">http://localhost:8000</a> ，访问 <a href="http://localhost:8000/api/users" target="_blank" rel="noopener">http://localhost:8000/api/users</a> ，就能访问到 <a href="http://127.0.0.1:8080/users" target="_blank" rel="noopener">http://127.0.0.1:8080/users</a> 的数据</p><h3 id="8-生成-users-路由"><a href="#8-生成-users-路由" class="headerlink" title="8.生成 users 路由"></a>8.生成 users 路由</h3><p>用 dva-cli 生成路由：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dva g route users</span></span><br></pre></td></tr></table></figure></p><p>然后就可以通过 <a href="http://localhost:8000/#/users" target="_blank" rel="noopener">http://localhost:8000/#/users</a> 代替 <a href="http://localhost:8000/api/users" target="_blank" rel="noopener">http://localhost:8000/api/users</a></p><h3 id="9-构造-users-model-和-service"><a href="#9-构造-users-model-和-service" class="headerlink" title="9.构造 users model 和 service"></a>9.构造 users model 和 service</h3><p>用 dva-cli 生成 Model ：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dva g model users</span></span><br></pre></td></tr></table></figure></p><p>修改 src/models/users.js ：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> usersService <span class="keyword">from</span> <span class="string">'../services/users'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  namespace: <span class="string">'users'</span>,</span><br><span class="line">  state: &#123;</span><br><span class="line">    list: [],</span><br><span class="line">    total: <span class="literal">null</span>,</span><br><span class="line">    page: <span class="literal">null</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  reducers: &#123;</span><br><span class="line">    save(state, &#123; <span class="attr">payload</span>: &#123; <span class="attr">data</span>: list, total, page &#125; &#125;) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, list, total, page &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  effects: &#123;</span><br><span class="line">    *fetch(&#123; <span class="attr">payload</span>: &#123; page = <span class="number">1</span> &#125; &#125;, &#123; call, put &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; data, headers &#125; = <span class="keyword">yield</span> call(usersService.fetch, &#123; page &#125;);</span><br><span class="line">      <span class="keyword">yield</span> put(&#123;</span><br><span class="line">        type: <span class="string">'save'</span>,</span><br><span class="line">        payload: &#123;</span><br><span class="line">          data,</span><br><span class="line">          total: <span class="built_in">parseInt</span>(headers[<span class="string">'x-total-count'</span>], <span class="number">10</span>),</span><br><span class="line">          page: <span class="built_in">parseInt</span>(page, <span class="number">10</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    *remove(&#123; <span class="attr">payload</span>: id &#125;, &#123; call, put &#125;) &#123;</span><br><span class="line">      <span class="keyword">yield</span> call(usersService.remove, id);</span><br><span class="line">      <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">'reload'</span> &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    *patch(&#123; <span class="attr">payload</span>: &#123; id, values &#125; &#125;, &#123; call, put &#125;) &#123;</span><br><span class="line">      <span class="keyword">yield</span> call(usersService.patch, id, values);</span><br><span class="line">      <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">'reload'</span> &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    *create(&#123; <span class="attr">payload</span>: values &#125;, &#123; call, put &#125;) &#123;</span><br><span class="line">      <span class="keyword">yield</span> call(usersService.create, values);</span><br><span class="line">      <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">'reload'</span> &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    *reload(action, &#123; put, select &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> page = <span class="keyword">yield</span> select(<span class="function"><span class="params">state</span> =&gt;</span> state.users.page);</span><br><span class="line">      <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">'fetch'</span>, <span class="attr">payload</span>: &#123; page &#125; &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  subscriptions: &#123;</span><br><span class="line">    setup(&#123; dispatch, history &#125;) &#123;</span><br><span class="line">      <span class="keyword">return</span> history.listen(<span class="function">(<span class="params">&#123; pathname, query &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (pathname === <span class="string">'/users'</span>) &#123;</span><br><span class="line">          dispatch(&#123; <span class="attr">type</span>: <span class="string">'fetch'</span>, <span class="attr">payload</span>: query &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>新增 src/services/users.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'../utils/request'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; PAGE_SIZE &#125; <span class="keyword">from</span> <span class="string">'../constants'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">fetch</span>(<span class="params">&#123; page &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">`/api/users?_page=<span class="subst">$&#123;page&#125;</span>&amp;_limit=<span class="subst">$&#123;PAGE_SIZE&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">`/api/users/<span class="subst">$&#123;id&#125;</span>`</span>, &#123;</span><br><span class="line">    method: <span class="string">'DELETE'</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">patch</span>(<span class="params">id, values</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">`/api/users/<span class="subst">$&#123;id&#125;</span>`</span>, &#123;</span><br><span class="line">    method: <span class="string">'PATCH'</span>,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(values),</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">values</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">'/api/users'</span>, &#123;</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(values),</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>由于我们需要从 response headers 中获取 total users 数量，所以需要改造下 src/utils/request.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fetch <span class="keyword">from</span> <span class="string">'dva/fetch'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkStatus</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (response.status &gt;= <span class="number">200</span> &amp;&amp; response.status &lt; <span class="number">300</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> error = <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText);</span><br><span class="line">  error.response = response;</span><br><span class="line">  <span class="keyword">throw</span> error;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Requests a URL, returning a promise.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param  &#123;string&#125; url       The URL we want to request</span></span><br><span class="line"><span class="comment"> * @param  &#123;object&#125; [options] The options we want to pass to "fetch"</span></span><br><span class="line"><span class="comment"> * @return &#123;object&#125;           An object containing either "data" or "err"</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">url, options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url, options);</span><br><span class="line"></span><br><span class="line">  checkStatus(response);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> response.json();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> ret = &#123;</span><br><span class="line">    data,</span><br><span class="line">    headers: &#123;&#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (response.headers.get(<span class="string">'x-total-count'</span>)) &#123;</span><br><span class="line">    ret.headers[<span class="string">'x-total-count'</span>] = response.headers.get(<span class="string">'x-total-count'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="10-添加界面，展现数据"><a href="#10-添加界面，展现数据" class="headerlink" title="10.添加界面，展现数据"></a>10.添加界面，展现数据</h3><p>用 dva-cli 生成 component<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dva g component Users/Users</span></span><br></pre></td></tr></table></figure></p><p>然后修改生成出来的 src/components/Users/Users.js 和 src/components/Users/Users.css<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'dva'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Table, Pagination, Popconfirm, Button &#125; <span class="keyword">from</span> <span class="string">'antd'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; routerRedux &#125; <span class="keyword">from</span> <span class="string">'dva/router'</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'./Users.css'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; PAGE_SIZE &#125; <span class="keyword">from</span> <span class="string">'../../constants'</span>;</span><br><span class="line"><span class="keyword">import</span> UserModal <span class="keyword">from</span> <span class="string">'./UserModal'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Users</span>(<span class="params">&#123; dispatch, list: dataSource, loading, total, page: current &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">deleteHandler</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    dispatch(&#123;</span><br><span class="line">      type: <span class="string">'users/remove'</span>,</span><br><span class="line">      payload: id,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">pageChangeHandler</span>(<span class="params">page</span>) </span>&#123;</span><br><span class="line">    dispatch(routerRedux.push(&#123;</span><br><span class="line">      pathname: <span class="string">'/users'</span>,</span><br><span class="line">      query: &#123; page &#125;,</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">editHandler</span>(<span class="params">id, values</span>) </span>&#123;</span><br><span class="line">    dispatch(&#123;</span><br><span class="line">      type: <span class="string">'users/patch'</span>,</span><br><span class="line">      payload: &#123; id, values &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">createHandler</span>(<span class="params">values</span>) </span>&#123;</span><br><span class="line">    dispatch(&#123;</span><br><span class="line">      type: <span class="string">'users/create'</span>,</span><br><span class="line">      payload: values,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> columns = [</span><br><span class="line">    &#123;</span><br><span class="line">      title: <span class="string">'用户名'</span>,</span><br><span class="line">      dataIndex: <span class="string">'username'</span>,</span><br><span class="line">      key: <span class="string">'username'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      title: <span class="string">'姓名'</span>,</span><br><span class="line">      dataIndex: <span class="string">'name'</span>,</span><br><span class="line">      key: <span class="string">'name'</span>,</span><br><span class="line">      render: <span class="function"><span class="params">text</span> =&gt;</span> &lt;a href=<span class="string">""</span>&gt;&#123;text&#125;&lt;<span class="regexp">/a&gt;,</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    &#123;</span></span><br><span class="line"><span class="regexp">      title: '权限',</span></span><br><span class="line"><span class="regexp">      dataIndex: 'permission',</span></span><br><span class="line"><span class="regexp">      key: 'permission',</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    &#123;</span></span><br><span class="line"><span class="regexp">      title: '操作',</span></span><br><span class="line"><span class="regexp">      key: 'operation',</span></span><br><span class="line"><span class="regexp">      render: (text, record) =&gt; (</span></span><br><span class="line"><span class="regexp">        &lt;span className=&#123;styles.operation&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;UserModal record=&#123;record&#125; onOk=&#123;editHandler.bind(null, record.id)&#125;&gt;</span></span><br><span class="line"><span class="regexp">            &lt;a&gt;编辑&lt;/</span>a&gt;</span><br><span class="line">          &lt;<span class="regexp">/UserModal&gt;</span></span><br><span class="line"><span class="regexp">          &lt;Popconfirm title="确定删除?" onConfirm=&#123;deleteHandler.bind(null, record.id)&#125;&gt;</span></span><br><span class="line"><span class="regexp">            &lt;a href=""&gt;删除&lt;/</span>a&gt;</span><br><span class="line">          &lt;<span class="regexp">/Popconfirm&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>span&gt;</span><br><span class="line">      ),</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;styles.normal&#125;&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div className=&#123;styles.create&#125;&gt;</span><br><span class="line">          &lt;UserModal record=&#123;&#123;&#125;&#125; onOk=&#123;createHandler&#125;&gt;</span><br><span class="line">            &lt;Button type=<span class="string">"primary"</span>&gt;Create User&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>UserModal&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Table</span></span><br><span class="line"><span class="regexp">          columns=&#123;columns&#125;</span></span><br><span class="line"><span class="regexp">          dataSource=&#123;dataSource&#125;</span></span><br><span class="line"><span class="regexp">          loading=&#123;loading&#125;</span></span><br><span class="line"><span class="regexp">          rowKey=&#123;record =&gt; record.id&#125;</span></span><br><span class="line"><span class="regexp">          pagination=&#123;false&#125;</span></span><br><span class="line"><span class="regexp">        /</span>&gt;</span><br><span class="line">        &lt;Pagination</span><br><span class="line">          className=<span class="string">"ant-table-pagination"</span></span><br><span class="line">          total=&#123;total&#125;</span><br><span class="line">          current=&#123;current&#125;</span><br><span class="line">          pageSize=&#123;PAGE_SIZE&#125;</span><br><span class="line">          onChange=&#123;pageChangeHandler&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; list, total, page &#125; = state.users;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    loading: state.loading.models.users,</span><br><span class="line">    list,</span><br><span class="line">    total,</span><br><span class="line">    page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps)(Users);</span><br></pre></td></tr></table></figure></p><p>在 src/routes/Users.js 中引用他<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'dva'</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'./Users.css'</span>;</span><br><span class="line"><span class="keyword">import</span> UsersComponent <span class="keyword">from</span> <span class="string">'../components/Users/Users'</span>;</span><br><span class="line"><span class="keyword">import</span> MainLayout <span class="keyword">from</span> <span class="string">'../components/MainLayout/MainLayout'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Users</span>(<span class="params">&#123; location &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;MainLayout location=&#123;location&#125;&gt;</span><br><span class="line">      &lt;div className=&#123;styles.normal&#125;&gt;</span><br><span class="line">        &lt;UsersComponent /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>MainLayout&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect()(Users);</span><br></pre></td></tr></table></figure></p><p>需留意两件事：<br>1.对 model 进行了微调，加入了 page 表示当前页<br>2.由于 components 和 services 中都用到了 pageSize，所以提取到 src/constants.js<br>改完后，切换到浏览器，应该能看到带分页的用户列表。</p><h3 id="11-添加-layout"><a href="#11-添加-layout" class="headerlink" title="11.添加 layout"></a>11.添加 layout</h3><p>添加 layout 布局，使得我们可以在首页和用户列表页之间来回切换<br>添加布局，src/components/MainLayout/MainLayout.js 和 CSS 文件<br>在 src/routes 文件夹下的文件中引用这个布局<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'./MainLayout.css'</span>;</span><br><span class="line"><span class="keyword">import</span> Header <span class="keyword">from</span> <span class="string">'./Header'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainLayout</span>(<span class="params">&#123; children, location &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;styles.normal&#125;&gt;</span><br><span class="line">      &lt;Header location=&#123;location&#125; /&gt;</span><br><span class="line">      &lt;div className=&#123;styles.content&#125;&gt;</span><br><span class="line">        &lt;div className=&#123;styles.main&#125;&gt;</span><br><span class="line">          &#123;children&#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default MainLayout;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.normal</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这时页面的菜单会随着页面切换变化，高亮显示当前页所在的菜单项</p><h3 id="12-通过-dva-loading-处理-loading-状态"><a href="#12-通过-dva-loading-处理-loading-状态" class="headerlink" title="12.通过 dva-loading 处理 loading 状态"></a>12.通过 dva-loading 处理 loading 状态</h3><p>dva 有一个管理 effects 执行的 hook，并基于此封装了 dva-loading 插件<br>通过这个插件，不必一遍遍地写 showLoading 和 hideLoading，当发起请求时，插件会自动设置数据里的 loading 状态为 true 或 false ，然后我们在渲染 components 时绑定并根据这个数据进行渲染<br>先安装 dva-loading<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm i dva-loading --save</span></span><br></pre></td></tr></table></figure></p><p>修改 src/index.js 加载插件，在合适的地方加入下面两句<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> createLoading <span class="keyword">from</span> <span class="string">'dva-loading'</span>;</span><br><span class="line">app.use(createLoading());</span><br></pre></td></tr></table></figure></p><p>然后在 src/components/Users/Users.js 里绑定 loading 数据：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loading: state.loading.models.users,</span><br></pre></td></tr></table></figure></p><h3 id="13-处理分页"><a href="#13-处理分页" class="headerlink" title="13.处理分页"></a>13.处理分页</h3><p>只改一个文件 src/components/Users/Users.js 就好<br>处理分页有两个思路：<br>1.发 action，请求新的分页数据，保存到 model，然后自动更新页面<br>2.切换路由 (由于之前监听了路由变化，所以后续的事情会自动处理)<br>我们用的是思路 2 的方式，好处是用户可以直接访问到 page 2 或其他页面<br>注：第10步的文件为已修改的代码</p><h3 id="14-处理用户删除"><a href="#14-处理用户删除" class="headerlink" title="14.处理用户删除"></a>14.处理用户删除</h3><p>功能调整基本都可以按照修改以下三个地方进行<br>1.service<br>2.model<br>3.component<br>service, 修改 src/services/users.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">`/api/users/<span class="subst">$&#123;id&#125;</span>`</span>, &#123;</span><br><span class="line">    method: <span class="string">'DELETE'</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>model, 修改 src/models/users.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*remove(&#123; <span class="attr">payload</span>: id &#125;, &#123; call, put, select &#125;) &#123;</span><br><span class="line">  <span class="keyword">yield</span> call(usersService.remove, id);</span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">yield</span> select(<span class="function"><span class="params">state</span> =&gt;</span> state.users.page);</span><br><span class="line">  <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">'fetch'</span>, <span class="attr">payload</span>: &#123; page &#125; &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>component, 修改 src/components/Users/Users.js，替换 deleteHandler 内容<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dispatch(&#123;</span><br><span class="line">  type: <span class="string">'users/remove'</span>,</span><br><span class="line">  payload: id,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h3 id="15-处理用户编辑"><a href="#15-处理用户编辑" class="headerlink" title="15.处理用户编辑"></a>15.处理用户编辑</h3><p>处理用户编辑和前面的一样，遵循三步走：<br>先是 service，修改 src/services/users.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">patch</span>(<span class="params">id, values</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">`/api/users/<span class="subst">$&#123;id&#125;</span>`</span>, &#123;</span><br><span class="line">    method: <span class="string">'PATCH'</span>,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(values),</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>再是 model，修改 src/models/users.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*patch(&#123; <span class="attr">payload</span>: &#123; id, values &#125; &#125;, &#123; call, put, select &#125;) &#123;</span><br><span class="line">  <span class="keyword">yield</span> call(usersService.patch, id, values);</span><br><span class="line">  <span class="keyword">const</span> page = <span class="keyword">yield</span> select(<span class="function"><span class="params">state</span> =&gt;</span> state.users.page);</span><br><span class="line">  <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: <span class="string">'fetch'</span>, <span class="attr">payload</span>: &#123; page &#125; &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>最后是 component，详见第10步的代码</p><blockquote><p>需要注意的一点是，我们在这里如何处理 Modal 的 visible 状态，有几种选择：<br>1.存 dva 的 model state 里<br>2.存 component state 里<br>另外，怎么存也是个问题，可以：<br>1.只有一个 visible，然后根据用户点选的 user 填不同的表单数据<br>2.几个 user 几个 visible<br>此教程选的方案是 2-2，即存 component state，并且 visible 按 user 存，另外为了使用的简便，封装了一个 UserModal 的组件</p></blockquote><h3 id="到这里，一个完整的-CURD-应用就完成了，后续后需要完善处理错误、请求、超时，根据路由动态加载-JS-和-CSS-等问题"><a href="#到这里，一个完整的-CURD-应用就完成了，后续后需要完善处理错误、请求、超时，根据路由动态加载-JS-和-CSS-等问题" class="headerlink" title="到这里，一个完整的 CURD 应用就完成了，后续后需要完善处理错误、请求、超时，根据路由动态加载 JS 和 CSS 等问题"></a>到这里，一个完整的 CURD 应用就完成了，后续后需要完善处理错误、请求、超时，根据路由动态加载 JS 和 CSS 等问题</h3><div class="tip"><br><div>参考链接</div><br><div>1. FlySheep_ly - <a href="http://www.jianshu.com/p/c2444ddd2de9" target="_blank" rel="noopener">Spring Boot + MyBatis + MySQL 整合</a></div><br><div>2. sorrycc - <a href="https://github.com/sorrycc/blog/issues/18" target="_blank" rel="noopener">12 步 30 分钟，完成用户管理的 CURD 应用 (react+dva+antd)</a></div><br></div><p><br></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../../../../../2017/12/15/实现用户管理springboot+react+dva+antd/screenshot_1.png&quot; alt=&quot;screenshot_1.png&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;结合了两位大神的文章，使用 springboot + react + dva + antd 快速实现 CURD 应用，包含后台数据服务，前端查询、编辑、删除、创建以及分页处理，数据 mock ，自动处理 loading 状态等。
    
    </summary>
    
    
      <category term="用户管理" scheme="http://eseries.studio/tags/%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/"/>
    
      <category term="react" scheme="http://eseries.studio/tags/react/"/>
    
      <category term="dva" scheme="http://eseries.studio/tags/dva/"/>
    
      <category term="antd" scheme="http://eseries.studio/tags/antd/"/>
    
  </entry>
  
  <entry>
    <title>表盘校准设计系统</title>
    <link href="http://eseries.studio/2017/11/29/%E8%A1%A8%E7%9B%98%E6%A0%A1%E5%87%86%E8%AE%BE%E8%AE%A1%E7%B3%BB%E7%BB%9F/"/>
    <id>http://eseries.studio/2017/11/29/表盘校准设计系统/</id>
    <published>2017-11-29T04:32:13.000Z</published>
    <updated>2017-12-29T01:03:18.000Z</updated>
    
    <content type="html"><![CDATA[<div class="tip"><br><strong>如有需要，请联系<a href="ethan.j.chu@gmail.com">EthanTech</a></strong><br></div><p><img src="../../../../../2017/11/29/表盘校准设计系统/screenshot_1.png" alt="screenshot_1.png"></p><hr><h3 id="2017年12月28日"><a href="#2017年12月28日" class="headerlink" title="2017年12月28日"></a><code>2017年12月28日</code></h3><blockquote><p>更新V1.0.2</p><ul><li>实装Logo图标绘制功能</li><li>修复日常BUG</li></ul></blockquote><hr><h3 id="2017年12月05日"><a href="#2017年12月05日" class="headerlink" title="2017年12月05日"></a><code>2017年12月05日</code></h3><blockquote><p>更新<b>V1.0.1</b></p><ul><li>新增外表盘单位绘制功能，支持单位名称、字号、颜色、位置自定义</li><li>新增作业进度条及Loading提示界面</li><li>新增更新历史界面，点击《表盘设计系统》即可打开、关闭该界面</li><li>新增高分辨率显示器支持</li><li>修复未关闭本系统无法将导出的矢量图导入第三方绘图软件的BUG<a id="more"></a></li></ul></blockquote><hr><h3 id="2017年11月29日"><a href="#2017年11月29日" class="headerlink" title="2017年11月29日"></a><code>2017年11月29日</code></h3><blockquote><p>更新<b>V1.0.0</b></p><ul><li>该版本为第一个用户试用版</li><li>已支持基本的外表盘绘制功能</li><li>已支持导出表盘WMF格式矢量图片</li><li>支持初始默认数据导入</li></ul></blockquote><p><img src="../../../../../2017/11/29/表盘校准设计系统/screenshot_2.png" alt="screenshot_2.png"><br><br></p>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;tip&quot;&gt;&lt;br&gt;&lt;strong&gt;如有需要，请联系&lt;a href=&quot;ethan.j.chu@gmail.com&quot;&gt;EthanTech&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;../../../../../2017/11/29/表盘校准设计系统/screenshot_1.png&quot; alt=&quot;screenshot_1.png&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;2017年12月28日&quot;&gt;&lt;a href=&quot;#2017年12月28日&quot; class=&quot;headerlink&quot; title=&quot;2017年12月28日&quot;&gt;&lt;/a&gt;&lt;code&gt;2017年12月28日&lt;/code&gt;&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;更新V1.0.2&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;实装Logo图标绘制功能&lt;/li&gt;
&lt;li&gt;修复日常BUG&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id=&quot;2017年12月05日&quot;&gt;&lt;a href=&quot;#2017年12月05日&quot; class=&quot;headerlink&quot; title=&quot;2017年12月05日&quot;&gt;&lt;/a&gt;&lt;code&gt;2017年12月05日&lt;/code&gt;&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;更新&lt;b&gt;V1.0.1&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;新增外表盘单位绘制功能，支持单位名称、字号、颜色、位置自定义&lt;/li&gt;
&lt;li&gt;新增作业进度条及Loading提示界面&lt;/li&gt;
&lt;li&gt;新增更新历史界面，点击《表盘设计系统》即可打开、关闭该界面&lt;/li&gt;
&lt;li&gt;新增高分辨率显示器支持&lt;/li&gt;
&lt;li&gt;修复未关闭本系统无法将导出的矢量图导入第三方绘图软件的BUG
    
    </summary>
    
    
      <category term="校准" scheme="http://eseries.studio/tags/%E6%A0%A1%E5%87%86/"/>
    
      <category term="绘制" scheme="http://eseries.studio/tags/%E7%BB%98%E5%88%B6/"/>
    
      <category term="表盘" scheme="http://eseries.studio/tags/%E8%A1%A8%E7%9B%98/"/>
    
      <category term="矢量图" scheme="http://eseries.studio/tags/%E7%9F%A2%E9%87%8F%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>i.MX28-Linux移植</title>
    <link href="http://eseries.studio/2016/06/30/i.MX28-Linux%E7%A7%BB%E6%A4%8D/"/>
    <id>http://eseries.studio/2016/06/30/i.MX28-Linux移植/</id>
    <published>2016-06-30T15:42:13.000Z</published>
    <updated>2017-04-20T15:27:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>1-3步均为未成功的例子，可自行忽略从第4步开始</p><h3 id="1-确定开发环境为Ubuntu-10-04"><a href="#1-确定开发环境为Ubuntu-10-04" class="headerlink" title="1.确定开发环境为Ubuntu-10.04"></a>1.确定开发环境为Ubuntu-10.04</h3><h3 id="2-更新软件源"><a href="#2-更新软件源" class="headerlink" title="2.更新软件源"></a>2.更新软件源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo gedit /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>在弹出的文本框中将原始内容全部清空，修改成下面的旧源，保存并退出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">deb http://old-releases.ubuntu.com/ubuntu/ natty main restricted universe multiverse</span><br><span class="line">deb http://old-releases.ubuntu.com/ubuntu/ natty-security main restricted universe multiverse</span><br><span class="line">deb http://old-releases.ubuntu.com/ubuntu/ natty-updates main restricted universe multiverse</span><br><span class="line">deb http://old-releases.ubuntu.com/ubuntu/ natty-proposed main restricted universe multiverse</span><br><span class="line">deb http://old-releases.ubuntu.com/ubuntu/ natty-backports main restricted universe multiverse</span><br><span class="line">deb-src http://old-releases.ubuntu.com/ubuntu/ natty main restricted universe multiverse</span><br><span class="line">deb-src http://old-releases.ubuntu.com/ubuntu/ natty-security main restricted universe multiverse</span><br><span class="line">deb-src http://old-releases.ubuntu.com/ubuntu/ natty-updates main restricted universe multiverse</span><br><span class="line">deb-src http://old-releases.ubuntu.com/ubuntu/ natty-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://old-releases.ubuntu.com/ubuntu/ natty-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure></p><p>更新源<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br></pre></td></tr></table></figure></p><h3 id="3-根据Freescale官方手册MX28-EVK-Linux-User-Guide-pdf步骤安装LTIB"><a href="#3-根据Freescale官方手册MX28-EVK-Linux-User-Guide-pdf步骤安装LTIB" class="headerlink" title="3.根据Freescale官方手册MX28_EVK_Linux_User_Guide.pdf步骤安装LTIB"></a>3.根据Freescale官方手册MX28_EVK_Linux_User_Guide.pdf步骤安装LTIB</h3><h4 id="Install-the-LTIB-package-not-as-root"><a href="#Install-the-LTIB-package-not-as-root" class="headerlink" title="Install the LTIB package not as root:"></a>Install the LTIB package not as root:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ tar zxf &lt;ltib_release&gt;.tar.gz</span><br><span class="line">$ ./&lt;ltib_release&gt;/install</span><br></pre></td></tr></table></figure><h4 id="Build-LTIB"><a href="#Build-LTIB" class="headerlink" title="Build LTIB:"></a>Build LTIB:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> &lt;your LTIB directory&gt;</span><br><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure><a id="more"></a><p>错误提示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">sh: g++: not found</span><br><span class="line"></span><br><span class="line">ltib cannot be run because one or more of the host packages needed to run it</span><br><span class="line">are either missing or out of date or not <span class="keyword">in</span> ltib<span class="string">'s standard path.  Please</span></span><br><span class="line"><span class="string">install/upgrade these packages on your host.  If you have your own utilities</span></span><br><span class="line"><span class="string">in non-standard paths, please add an entry into the .ltibrc file for example:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">%path_std</span></span><br><span class="line"><span class="string">/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/X11R6/bin:/my/own/exes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Package                Minimum ver   Installed info</span></span><br><span class="line"><span class="string">-------                -----------   ---------------</span></span><br><span class="line"><span class="string">libstdc++              0             not installed</span></span><br><span class="line"><span class="string">gcc-c++                2.96          not installed</span></span><br><span class="line"><span class="string">zlib-devel             0             not installed</span></span><br><span class="line"><span class="string">rpm                    0             not installed</span></span><br><span class="line"><span class="string">rpm-build              0             not installed</span></span><br><span class="line"><span class="string">ncurses-devel          0             not installed</span></span><br><span class="line"><span class="string">m4                     0             not installed</span></span><br><span class="line"><span class="string">bison                  0             not installed</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Died at ./ltib line 1409.</span></span><br><span class="line"><span class="string">traceback:</span></span><br><span class="line"><span class="string"> main::host_checks:1409</span></span><br><span class="line"><span class="string">  main:554</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Started: Mon May 16 22:42:49 2016</span></span><br><span class="line"><span class="string">Ended:   Mon May 16 22:42:49 2016</span></span><br><span class="line"><span class="string">Elapsed: 0 seconds</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Build Failed</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Exiting on error or interrupt</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure><p>解决办法：<br>根据Freescale官方手册Setting_Up_LTIB_Host_on_Ubuntu_9_04.pdf<br>Install packages needed by LTIB<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Install packages needed by LTIB</span></span><br><span class="line">$ sudo aptitude -y install gettext libgtk2.0-dev rpm bison m4 libfreetype6-dev</span><br><span class="line">$ sudo aptitude -y install libdbus-glib-1-dev liborbit2-dev intltool</span><br><span class="line">$ sudo aptitude -y install ccache ncurses-dev zlib1g zlib1g-dev gcc g++ libtool</span><br><span class="line">$ sudo aptitude -y install uuid-dev liblzo2-dev</span><br><span class="line">$ sudo aptitude -y install tcl dpkg</span><br><span class="line"><span class="comment"># Packages required for 64-bit Ubuntu</span></span><br><span class="line"><span class="comment"># Do "uname -a" and see if the word "x86_64" shows up.</span></span><br><span class="line"><span class="keyword">if</span> uname -a|grep -sq <span class="string">'x86_64'</span>; <span class="keyword">then</span></span><br><span class="line">    sudo aptitude -y install ia32-libs libc6-dev-i386 lib32z1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># The following recommended for Linux development.</span></span><br><span class="line"><span class="comment"># They are not required by LTIB.</span></span><br><span class="line">$ sudo aptitude -y install gparted emacs22-nox openssh-server</span><br><span class="line">$ sudo aptitude -y install nfs-common nfs-kernel-server lintian</span><br><span class="line">$ sudo aptitude -y install git-core git-doc git-email git-gui gitk</span><br><span class="line">$ sudo aptitude -y install diffstat indent tofrodos fakeroot doxygen uboot-mkimage</span><br><span class="line">$ sudo aptitude -y install sendmail mailutils meld atftpd sharutils</span><br><span class="line">$ sudo aptitude -y install manpages-dev manpages-posix manpages-posix-dev linux-doc</span><br><span class="line">$ sudo aptitude -y install vnc4server xvnc4viewer</span><br></pre></td></tr></table></figure></p><p>解决完上面的错误，继续执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure></p><p>错误提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">I ran the <span class="built_in">command</span>: sudo -S -l <span class="built_in">which</span> returned:</span><br><span class="line"></span><br><span class="line">[sudo] password <span class="keyword">for</span> ethan: Sorry, try again.</span><br><span class="line">[sudo] password <span class="keyword">for</span> ethan: Sorry, try again.</span><br><span class="line">[sudo] password <span class="keyword">for</span> ethan: Sorry, try again.</span><br><span class="line">sudo: 3 incorrect password attempts</span><br><span class="line"></span><br><span class="line">This means you don<span class="string">'t have sudo permission to execute rpm commands as root</span></span><br><span class="line"><span class="string">without a password.  This is needed for this build script to operate correctly.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To configure this, as root using the command "/usr/sbin/visudo",</span></span><br><span class="line"><span class="string">and add the following line in the User privilege section:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ethan ALL = NOPASSWD: /usr/bin/rpm, /opt/freescale/ltib/usr/bin/rpm</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">traceback:</span></span><br><span class="line"><span class="string"> main::check_sudo_setup:2467</span></span><br><span class="line"><span class="string">  main::host_checks:1413</span></span><br><span class="line"><span class="string">   main:554</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Started: Tue May 31 22:25:48 2016</span></span><br><span class="line"><span class="string">Ended:   Tue May 31 22:25:53 2016</span></span><br><span class="line"><span class="string">Elapsed: 5 seconds</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Build Failed</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Exiting on error or interrupt</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure></p><p>解决办法：<br>根据Freescale官方手册Setting_Up_LTIB_Host_on_Ubuntu_9_04.pdf<br>LTIB is executed as a regular user but requires root privileges during execution. To accommodate this, the sudoers file needs to be modified.<br>Run this command to edit the sudoers file:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo visudo</span><br></pre></td></tr></table></figure></p><p>Add the following line to the end of the sudoers file.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%admin ALL = NOPASSWD: /usr/bin/rpm, /opt/freescale/ltib/usr/bin/rpm</span><br></pre></td></tr></table></figure></p><p>解决完上面的错误，继续执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure></p><p>提示是接近一个小时的等待OvO</p><p>…<br>…<br>…<br>…<br>…<br>…<br>…</p><p>一个小时已经过去，然而并没有完成OvO</p><p>…<br>…<br>…<br>…<br>…<br>…<br>…</p><p>一个半小时已经过去，我要睡觉了OvO</p><p>起床发现还是不行，打开log文件发现<br>Updating lpp from local packages</p><p>错误提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Updating lpp from <span class="built_in">local</span> packages</span><br><span class="line"></span><br><span class="line">Processing platform: Host support packages</span><br><span class="line">============================================</span><br><span class="line">using /home/ethan/ltib/config/platform/host/ltib.preconfig</span><br><span class="line"></span><br><span class="line">Processing: fake-provides</span><br><span class="line">===========================</span><br><span class="line"></span><br><span class="line">Processing: mkspooflinks</span><br><span class="line">==========================</span><br><span class="line">Build path taken because: directory build,</span><br><span class="line"></span><br><span class="line">Cowardly refusing to clobber existing directory:</span><br><span class="line"> /opt/freescale/ltib/usr/src/rpm/BUILD/mkspooflinks-3.4</span><br><span class="line">Remove this by hand <span class="keyword">if</span> you really want to rebuild this package from scratch</span><br><span class="line"></span><br><span class="line">Died at ./ltib line 1392.</span><br><span class="line">traceback:</span><br><span class="line"> main::build_host_rpms:1392</span><br><span class="line">  main::host_checks:1447</span><br><span class="line">   main:554</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Started: Thu Jun 23 18:48:59 2016</span><br><span class="line">Ended:   Thu Jun 23 18:49:00 2016</span><br><span class="line">Elapsed: 1 seconds</span><br><span class="line"></span><br><span class="line">These packages failed to build:</span><br><span class="line">mkspooflinks</span><br><span class="line"></span><br><span class="line">Build Failed</span><br><span class="line">------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></p><p>解决办法：<br>oh，跟我预想一样，安装在Mac共享文件夹下是不行的<br>换到Ubuntu本地，继续执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure></p><p>错误提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Processing: mtd-utils</span><br><span class="line">=======================</span><br><span class="line">Build path taken because: no prebuilt rpm,</span><br><span class="line">Try mtd-utils-1.5.0.tar.gz.md5 from the GPP</span><br><span class="line">http://bitshrine.org/gpp/mtd-utils-1.5.0.tar.gz.md5:</span><br><span class="line">19:05:31 ERROR 404: Not Found.</span><br><span class="line">Try mtd-utils-1.5.0.tar.gz from the GPP</span><br><span class="line">http://bitshrine.org/gpp/mtd-utils-1.5.0.tar.gz:</span><br><span class="line">19:05:31 ERROR 404: Not Found.</span><br><span class="line">Can<span class="string">'t get: mtd-utils-1.5.0.tar.gz at ./ltib line 802.</span></span><br><span class="line"><span class="string">Died at ./ltib line 1392.</span></span><br><span class="line"><span class="string">traceback:</span></span><br><span class="line"><span class="string"> main::build_host_rpms:1392</span></span><br><span class="line"><span class="string">  main::host_checks:1447</span></span><br><span class="line"><span class="string">   main:554</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Started: Thu Jun 23 18:58:07 2016</span></span><br><span class="line"><span class="string">Ended:   Thu Jun 23 19:05:31 2016</span></span><br><span class="line"><span class="string">Elapsed: 444 seconds</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">These packages failed to build:</span></span><br><span class="line"><span class="string">mtd-utils</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure></p><p>解决办法：<br>初步断定是源不行了，经过一天的摸索，替换源什么的都试了，过程中太多包找不到了，后来偶然发现下载的L2.6.35_1.1.0_130130_source里面有pkgs，也是醉了…原来还是共享文件夹的问题<br>删除opt/freescale文件夹<br>L2.6.35_1.1.0_130130_source拷贝到Ubuntu下，重新执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./&lt;ltib_release&gt;/install</span><br><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure></p><h4 id="Select-the-platform-as-“Freescale-iMX-reference-boards”-and-exit-after-saving-the-changes-In-the-next-menu-select-“mx28”-as-platform-type-and-select-a-package-profile-Profiles-min-test-and-fsl-gnome-have-been-tested-Exit-after-saving-changes"><a href="#Select-the-platform-as-“Freescale-iMX-reference-boards”-and-exit-after-saving-the-changes-In-the-next-menu-select-“mx28”-as-platform-type-and-select-a-package-profile-Profiles-min-test-and-fsl-gnome-have-been-tested-Exit-after-saving-changes" class="headerlink" title="Select the platform as “Freescale iMX reference boards” and exit after saving the changes. In the next menu, select “mx28” as platform type and select a package profile. Profiles min, test, and fsl gnome have been tested. Exit after saving changes."></a>Select the platform as “Freescale iMX reference boards” and exit after saving the changes. In the next menu, select “mx28” as platform type and select a package profile. Profiles min, test, and fsl gnome have been tested. Exit after saving changes.</h4><h4 id="这里gcc需要选择4-4-4的版本"><a href="#这里gcc需要选择4-4-4的版本" class="headerlink" title="这里gcc需要选择4.4.4的版本"></a>这里gcc需要选择4.4.4的版本</h4><p>错误提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Processing platform: Freescale iMX28 Based Boards</span><br><span class="line">===================================================</span><br><span class="line">using config/platform/imx/.config</span><br><span class="line"></span><br><span class="line">Processing: fake-provides</span><br><span class="line">===========================</span><br><span class="line"></span><br><span class="line">Processing: u-boot</span><br><span class="line">====================</span><br><span class="line">Build path taken because: directory build, no prebuilt rpm,</span><br><span class="line">scbuild/scdeploy already unpacked package</span><br><span class="line"></span><br><span class="line">Processing: u-boot</span><br><span class="line">====================</span><br><span class="line">Build path taken because: directory build, build key <span class="built_in">set</span>, no prebuilt rpm,</span><br><span class="line"></span><br><span class="line">rpmbuild --dbpath /home/ethan/ltib/rootfs//var/lib/rpm --target arm --define <span class="string">'_unpackaged_files_terminate_build 0'</span> --define <span class="string">'_target_cpu arm'</span> --define <span class="string">'__strip strip'</span> --define <span class="string">'_topdir /home/ethan/ltib/rpm'</span> --define <span class="string">'_prefix /usr'</span> --define <span class="string">'_tmppath /home/ethan/ltib/tmp'</span> --define <span class="string">'_rpmdir /home/ethan/ltib/rpm/RPMS'</span>  --define <span class="string">'_mandir /usr/share/man'</span> --define <span class="string">'_sysconfdir /etc'</span> --define <span class="string">'_localstatedir /var'</span> -bc --short-circuit  /home/ethan/ltib/tmp/u-boot.spec</span><br><span class="line">Building target platforms: arm</span><br><span class="line">Building <span class="keyword">for</span> target arm</span><br><span class="line">Executing(%build): /bin/sh -e /home/ethan/ltib/tmp/rpm-tmp.93639</span><br><span class="line">+ <span class="built_in">umask</span> 022</span><br><span class="line">+ <span class="built_in">cd</span> /home/ethan/ltib/rpm/BUILD</span><br><span class="line">+ <span class="built_in">cd</span> u-boot-2009.08</span><br><span class="line">+ : mx28_evk_config</span><br><span class="line">+ <span class="built_in">eval</span> <span class="built_in">echo</span></span><br><span class="line">+ <span class="built_in">echo</span></span><br><span class="line">+ PKG_U_BOOT_PATH_PRECONFIG=</span><br><span class="line">+ SRC_DIR=/home/ethan/ltib/rpm/BUILD/u-boot-2009.08</span><br><span class="line">+ BUILD_DIR=/home/ethan/ltib/rpm/BUILD/u-boot-2009.08</span><br><span class="line">+ [ /home/ethan/ltib/rpm/BUILD/u-boot-2009.08 != /home/ethan/ltib/rpm/BUILD/u-boot-2009.08 ]</span><br><span class="line">+ <span class="built_in">cd</span> /home/ethan/ltib/rpm/BUILD/u-boot-2009.08</span><br><span class="line">+ [ -n  ]</span><br><span class="line">+ make HOSTCC=ccache /usr/bin/gcc -B/usr/bin/ CROSS_COMPILE=arm-none-linux-gnueabi- O=/home/ethan/ltib/rpm/BUILD/u-boot-2009.08 mx28_evk_config</span><br><span class="line">make: *** No rule to make target `mx28_evk_config<span class="string">'.  Stop.</span></span><br><span class="line"><span class="string">error: Bad exit status from /home/ethan/ltib/tmp/rpm-tmp.93639 (%build)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">RPM build errors:</span></span><br><span class="line"><span class="string">    Bad exit status from /home/ethan/ltib/tmp/rpm-tmp.93639 (%build)</span></span><br><span class="line"><span class="string">Build time for u-boot: 0 seconds</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Failed building u-boot</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">f_buildrpms() returned an error, exiting</span></span><br><span class="line"><span class="string">traceback:</span></span><br><span class="line"><span class="string"> main:572</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Started: Sun Jul  3 01:34:21 2016</span></span><br><span class="line"><span class="string">Ended:   Sun Jul  3 01:35:33 2016</span></span><br><span class="line"><span class="string">Elapsed: 72 seconds</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">These packages failed to build:</span></span><br><span class="line"><span class="string">u-boot</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Build Failed</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Exiting on error or interrupt</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure></p><p>解决办法<br>nxp的论坛里面给出了解决方法，由于我重新在12.04上搭建环境，所以没有尝试<br><a href="https://community.nxp.com/thread/303737" target="_blank" rel="noopener">https://community.nxp.com/thread/303737</a></p><h3 id="4-重新确定开发环境为Ubuntu-12-04"><a href="#4-重新确定开发环境为Ubuntu-12-04" class="headerlink" title="4.重新确定开发环境为Ubuntu-12.04"></a>4.重新确定开发环境为Ubuntu-12.04</h3><h3 id="5-根据-https-community-nxp-com-docs-DOC-98909-进行配置"><a href="#5-根据-https-community-nxp-com-docs-DOC-98909-进行配置" class="headerlink" title="5.根据 https://community.nxp.com/docs/DOC-98909 进行配置"></a>5.根据 <a href="https://community.nxp.com/docs/DOC-98909" target="_blank" rel="noopener">https://community.nxp.com/docs/DOC-98909</a> 进行配置</h3><h4 id="安装需要的包"><a href="#安装需要的包" class="headerlink" title="安装需要的包"></a>安装需要的包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install gettext libgtk2.0-dev rpm bison m4 libfreetype6-dev</span><br><span class="line">$ sudo apt-get install libdbus-glib-1-dev liborbit2-dev intltool</span><br><span class="line">$ sudo apt-get install ccache ncurses-dev zlib1g zlib1g-dev gcc g++ libtool</span><br><span class="line">$ sudo apt-get install uuid-dev liblzo2-dev</span><br><span class="line">$ sudo apt-get install tcl dpkg</span><br><span class="line">$ sudo apt-get install asciidoc texlive-latex-base dblatex xutils-dev</span><br><span class="line">$ sudo apt-get install texlive texinfo</span><br><span class="line">$ sudo apt-get install ia32-libs libc6-dev-i386 lib32z1</span><br><span class="line">$ sudo apt-get install uboot-mkimage</span><br><span class="line">$ sudo apt-get install scrollkeeper</span><br><span class="line">$ sudo apt-get install gparted</span><br><span class="line">$ sudo apt-get install nfs-common nfs-kernel-server</span><br><span class="line">$ sudo apt-get install git-core git-doc git-email git-gui gitk</span><br><span class="line">$ sudo apt-get install meld atftpd</span><br></pre></td></tr></table></figure><h4 id="解压安装LTIB"><a href="#解压安装LTIB" class="headerlink" title="解压安装LTIB"></a>解压安装LTIB</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ tar -zxvf L2.6.35_1.1.0_130130_source.tar.gz</span><br><span class="line">$ ./L2.6.35_1.1.0_130130_source/install</span><br></pre></td></tr></table></figure><h4 id="安装12-04补丁0001-make-L2-6-35-1-1-0-130130-compile-on-ubuntu-12-04-64bit-OS-patch"><a href="#安装12-04补丁0001-make-L2-6-35-1-1-0-130130-compile-on-ubuntu-12-04-64bit-OS-patch" class="headerlink" title="安装12.04补丁0001_make_L2.6.35_1.1.0_130130_compile_on_ubuntu_12.04_64bit_OS.patch"></a>安装12.04补丁<a href="https://community.nxp.com/servlet/JiveServlet/download/98909-4-268680/0001_make_L2.6.35_1.1.0_130130_compile_on_ubuntu_12.04_64bit_OS.patch.zip" target="_blank" rel="noopener">0001_make_L2.6.35_1.1.0_130130_compile_on_ubuntu_12.04_64bit_OS.patch</a></h4><p>解压拷贝到~/ltib下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/ltib</span><br><span class="line">$ git apply 0001_make_L2.6.35_1.1.0_130130_compile_on_ubuntu_12.04_64bit_OS.patch</span><br></pre></td></tr></table></figure></p><h4 id="预配置然后安装"><a href="#预配置然后安装" class="headerlink" title="预配置然后安装"></a>预配置然后安装</h4><h4 id="这里gcc需要选择4-4-4的版本-1"><a href="#这里gcc需要选择4-4-4的版本-1" class="headerlink" title="这里gcc需要选择4.4.4的版本"></a>这里gcc需要选择4.4.4的版本</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/ltib</span><br><span class="line">$ ./ltib -m config</span><br><span class="line">$ ./ltib</span><br></pre></td></tr></table></figure><h3 id="6-等待半小时左右，提示以下内容就成功了"><a href="#6-等待半小时左右，提示以下内容就成功了" class="headerlink" title="6.等待半小时左右，提示以下内容就成功了"></a>6.等待半小时左右，提示以下内容就成功了</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Processing deployment operations</span><br><span class="line">==================================</span><br><span class="line">making filesystem image file</span><br><span class="line">staging directory is /home/ethan/ltib/rootfs.tmp</span><br><span class="line">removing the boot directory and files</span><br><span class="line">removing man files and directories</span><br><span class="line">removing info files</span><br><span class="line">removing /usr/share/locale directory</span><br><span class="line">removing static libraries</span><br><span class="line">removing target rpm database</span><br><span class="line">stripping binaries and libraries</span><br><span class="line"></span><br><span class="line">Filesystem stats, including padding:</span><br><span class="line"></span><br><span class="line">    Total size            = 14936k</span><br><span class="line">    Total number of files = 1295</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Started: Mon Jul  4 21:49:45 2016</span><br><span class="line">Ended:   Mon Jul  4 22:11:17 2016</span><br><span class="line">Elapsed: 1292 seconds</span><br><span class="line"></span><br><span class="line">Build Succeeded</span><br><span class="line">------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure><p>在~/ltib/rootfs/boot/下面会生成以下固件<br><img src="../i.MX28-Linux移植/结果.jpg" alt="结果"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;1-3步均为未成功的例子，可自行忽略从第4步开始&lt;/p&gt;
&lt;h3 id=&quot;1-确定开发环境为Ubuntu-10-04&quot;&gt;&lt;a href=&quot;#1-确定开发环境为Ubuntu-10-04&quot; class=&quot;headerlink&quot; title=&quot;1.确定开发环境为Ubuntu-10.04&quot;&gt;&lt;/a&gt;1.确定开发环境为Ubuntu-10.04&lt;/h3&gt;&lt;h3 id=&quot;2-更新软件源&quot;&gt;&lt;a href=&quot;#2-更新软件源&quot; class=&quot;headerlink&quot; title=&quot;2.更新软件源&quot;&gt;&lt;/a&gt;2.更新软件源&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo gedit /etc/apt/sources.list&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在弹出的文本框中将原始内容全部清空，修改成下面的旧源，保存并退出&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;deb http://old-releases.ubuntu.com/ubuntu/ natty main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb http://old-releases.ubuntu.com/ubuntu/ natty-security main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb http://old-releases.ubuntu.com/ubuntu/ natty-updates main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb http://old-releases.ubuntu.com/ubuntu/ natty-proposed main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb http://old-releases.ubuntu.com/ubuntu/ natty-backports main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb-src http://old-releases.ubuntu.com/ubuntu/ natty main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb-src http://old-releases.ubuntu.com/ubuntu/ natty-security main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb-src http://old-releases.ubuntu.com/ubuntu/ natty-updates main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb-src http://old-releases.ubuntu.com/ubuntu/ natty-proposed main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deb-src http://old-releases.ubuntu.com/ubuntu/ natty-backports main restricted universe multiverse&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;更新源&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt-get update&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;3-根据Freescale官方手册MX28-EVK-Linux-User-Guide-pdf步骤安装LTIB&quot;&gt;&lt;a href=&quot;#3-根据Freescale官方手册MX28-EVK-Linux-User-Guide-pdf步骤安装LTIB&quot; class=&quot;headerlink&quot; title=&quot;3.根据Freescale官方手册MX28_EVK_Linux_User_Guide.pdf步骤安装LTIB&quot;&gt;&lt;/a&gt;3.根据Freescale官方手册MX28_EVK_Linux_User_Guide.pdf步骤安装LTIB&lt;/h3&gt;&lt;h4 id=&quot;Install-the-LTIB-package-not-as-root&quot;&gt;&lt;a href=&quot;#Install-the-LTIB-package-not-as-root&quot; class=&quot;headerlink&quot; title=&quot;Install the LTIB package not as root:&quot;&gt;&lt;/a&gt;Install the LTIB package not as root:&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ tar zxf &amp;lt;ltib_release&amp;gt;.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ./&amp;lt;ltib_release&amp;gt;/install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Build-LTIB&quot;&gt;&lt;a href=&quot;#Build-LTIB&quot; class=&quot;headerlink&quot; title=&quot;Build LTIB:&quot;&gt;&lt;/a&gt;Build LTIB:&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; &amp;lt;your LTIB directory&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ./ltib&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="i.MX28" scheme="http://eseries.studio/tags/i-MX28/"/>
    
      <category term="Linux" scheme="http://eseries.studio/tags/Linux/"/>
    
      <category term="Ubuntu" scheme="http://eseries.studio/tags/Ubuntu/"/>
    
      <category term="ARM" scheme="http://eseries.studio/tags/ARM/"/>
    
      <category term="嵌入式" scheme="http://eseries.studio/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>BALI-2015</title>
    <link href="http://eseries.studio/2016/05/01/BALI-2015/"/>
    <id>http://eseries.studio/2016/05/01/BALI-2015/</id>
    <published>2016-05-01T13:44:13.000Z</published>
    <updated>2017-03-21T04:35:48.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="📍Location-Nusa-Lembongan"><a href="#📍Location-Nusa-Lembongan" class="headerlink" title="📍Location: Nusa Lembongan"></a>📍Location: Nusa Lembongan</h4><p><img src="../../../../../2016/05/01/BALI-2015/Nusa Lembongan1.jpg" alt="Nusa Lembongan1"> <a id="more"></a><br><br></p><h4 id="📍Location-Puri-Nusa-Dua"><a href="#📍Location-Puri-Nusa-Dua" class="headerlink" title="📍Location: Puri Nusa Dua"></a>📍Location: Puri Nusa Dua</h4><p><img src="../BALI-2015/Puri Nusa Dua.jpg" alt="Puri Nusa Dua"><br><br></p><h4 id="📍Location-Benoa-Bay"><a href="#📍Location-Benoa-Bay" class="headerlink" title="📍Location: Benoa Bay"></a>📍Location: Benoa Bay</h4><p><img src="../BALI-2015/Benoa Bay.jpg" alt="Benoa Bay"><br><br></p><h4 id="📍Location-Pura-Tanah-Lot"><a href="#📍Location-Pura-Tanah-Lot" class="headerlink" title="📍Location: Pura Tanah Lot"></a>📍Location: Pura Tanah Lot</h4><p><img src="../BALI-2015/Pura Tanah Lot.jpg" alt="Pura Tanah Lot"><br><br></p><h4 id="📍Location-Bounty-Cruise"><a href="#📍Location-Bounty-Cruise" class="headerlink" title="📍Location: Bounty Cruise"></a>📍Location: Bounty Cruise</h4><p><img src="../BALI-2015/Bounty Cruise.jpg" alt="Bounty Cruise"><br><br></p><h4 id="📍Location-Nusa-Lembongan-1"><a href="#📍Location-Nusa-Lembongan-1" class="headerlink" title="📍Location: Nusa Lembongan"></a>📍Location: Nusa Lembongan</h4><p><img src="../BALI-2015/Nusa Lembongan2.jpg" alt="Nusa Lembongan2"><br><br></p><h4 id="📍Location-Nusa-Lembongan-2"><a href="#📍Location-Nusa-Lembongan-2" class="headerlink" title="📍Location: Nusa Lembongan"></a>📍Location: Nusa Lembongan</h4><p><img src="../BALI-2015/Nusa Lembongan3.jpg" alt="Nusa Lembongan3"><br><br></p><h4 id="📍Location-Nusa-Lembongan-3"><a href="#📍Location-Nusa-Lembongan-3" class="headerlink" title="📍Location: Nusa Lembongan"></a>📍Location: Nusa Lembongan</h4><p><img src="../BALI-2015/Nusa Lembongan4.jpg" alt="Nusa Lembongan4"><br><br></p><h4 id="📍Location-Kuta"><a href="#📍Location-Kuta" class="headerlink" title="📍Location: Kuta"></a>📍Location: Kuta</h4><p><img src="../BALI-2015/Kuta.jpg" alt="Kuta"></p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;📍Location-Nusa-Lembongan&quot;&gt;&lt;a href=&quot;#📍Location-Nusa-Lembongan&quot; class=&quot;headerlink&quot; title=&quot;📍Location: Nusa Lembongan&quot;&gt;&lt;/a&gt;📍Location: Nusa Lembongan&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;../../../../../2016/05/01/BALI-2015/Nusa Lembongan1.jpg&quot; alt=&quot;Nusa Lembongan1&quot;&gt;
    
    </summary>
    
    
      <category term="巴厘岛" scheme="http://eseries.studio/tags/%E5%B7%B4%E5%8E%98%E5%B2%9B/"/>
    
      <category term="BALI" scheme="http://eseries.studio/tags/BALI/"/>
    
  </entry>
  
  <entry>
    <title>部署hexo3.0到Github和Coding</title>
    <link href="http://eseries.studio/2016/04/24/%E9%83%A8%E7%BD%B2hexo3.0%E5%88%B0Github%E5%92%8CCoding/"/>
    <id>http://eseries.studio/2016/04/24/部署hexo3.0到Github和Coding/</id>
    <published>2016-04-24T12:49:13.000Z</published>
    <updated>2017-03-21T02:38:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>一开始只准备在Github上建站，后来发现墙壁实在是太厚，偶然发现可以将hexo同时部署到Github和GitCafe，于是开始搞事儿。刚注册完GitCafe就发现它居然已经被Coding包养了，无奈又去注册了Coding。开始部署发现hexo已经升级到了3.0，找到的教程普遍都是2.0的，有些细节不太实用，再加上bash实在是不熟，搞了有点时间，所以决定部署完成第一篇就记录一下部署过程。</p><a id="more"></a><h3 id="部署环境"><a href="#部署环境" class="headerlink" title="部署环境"></a>部署环境</h3><p><strong>操作系统</strong>： <strong>OS X</strong> EL Capitan 10.11.4<br><strong>Node.js</strong>： <a href="https://nodejs.org/" target="_blank" rel="noopener">node-v4.4.2.pkg</a><br><strong>Homebrew</strong>： 安装git用的，这里就不介绍了<br><strong>git</strong>： 安装hexo会用到，也不介绍了</p><h3 id="安装Node"><a href="#安装Node" class="headerlink" title="安装Node"></a>安装Node</h3><p>我下载的是node-v4.4.2.pkg安装包直接安装即可。<br>安装完成后进入终端输入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm</span><br></pre></td></tr></table></figure></p><p>提示以下内容就是OK了。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Usage: npm &lt;<span class="built_in">command</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">where</span> &lt;<span class="built_in">command</span>&gt; is one of:</span><br><span class="line">    access, add-user, adduser, apihelp, author, bin, bugs, c,</span><br><span class="line">    cache, completion, config, ddp, dedupe, deprecate, dist-tag,</span><br><span class="line">    dist-tags, docs, edit, explore, faq, find, find-dupes, get,</span><br><span class="line">    <span class="built_in">help</span>, <span class="built_in">help</span>-search, home, i, info, init, install, issues, la,</span><br><span class="line">    link, list, ll, ln, login, <span class="built_in">logout</span>, ls, outdated, owner,</span><br><span class="line">    pack, ping, prefix, prune, publish, r, rb, rebuild, remove,</span><br><span class="line">    repo, restart, rm, root, run-script, s, se, search, <span class="built_in">set</span>,</span><br><span class="line">    show, shrinkwrap, star, stars, start, stop, t, tag, team,</span><br><span class="line">    <span class="built_in">test</span>, tst, un, uninstall, unlink, unpublish, unstar, up,</span><br><span class="line">    update, upgrade, v, version, view, whoami</span><br><span class="line"></span><br><span class="line">npm &lt;cmd&gt; -h     quick <span class="built_in">help</span> on &lt;cmd&gt;</span><br><span class="line">npm -l           display full usage info</span><br><span class="line">npm faq          commonly asked questions</span><br><span class="line">npm <span class="built_in">help</span> &lt;term&gt;  search <span class="keyword">for</span> <span class="built_in">help</span> on &lt;term&gt;</span><br><span class="line">npm <span class="built_in">help</span> npm     involved overview</span><br><span class="line"></span><br><span class="line">Specify configs <span class="keyword">in</span> the ini-formatted file:</span><br><span class="line">    /Users/Ethan/.npmrc</span><br><span class="line">or on the <span class="built_in">command</span> line via: npm &lt;<span class="built_in">command</span>&gt; --key value</span><br><span class="line">Config info can be viewed via: npm <span class="built_in">help</span> config</span><br><span class="line"></span><br><span class="line">npm@2.15.0 /usr/<span class="built_in">local</span>/lib/node_modules/npm</span><br></pre></td></tr></table></figure></p><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><p>根据<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">hexo</a>官方文档直接终端输入以下命令即可<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br><span class="line">$ hexo init blog</span><br><span class="line">$ <span class="built_in">cd</span> blog</span><br><span class="line">$ npm install</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure></p><p>打开本地服务器预览(点击访问 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> ，就可以看到了你的blog了)<br>之后你可以将blog文件夹放到任何你想放的地方，如果之后部署有问题请使用超级权限<code>sudo</code></p><h3 id="配置hexo"><a href="#配置hexo" class="headerlink" title="配置hexo"></a>配置hexo</h3><h4 id="安装rss支持"><a href="#安装rss支持" class="headerlink" title="安装rss支持"></a>安装rss支持</h4><p>执行如下命令:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure></p><h4 id="安装sitemap支持"><a href="#安装sitemap支持" class="headerlink" title="安装sitemap支持"></a>安装sitemap支持</h4><p>执行如下命令:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure></p><h4 id="安装其他插件"><a href="#安装其他插件" class="headerlink" title="安装其他插件"></a>安装其他插件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-archive --save</span><br><span class="line">npm install hexo-generator-category --save</span><br><span class="line">npm install hexo-generator-tag --save</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h3 id="注册Github和Coding"><a href="#注册Github和Coding" class="headerlink" title="注册Github和Coding"></a>注册Github和Coding</h3><p>在自己Github创建一个新的repository。比如我的Github账号是ethanjuenchu，那么我应该创建的repository名字应该是<a href="https://ethanjunechu.github.io" target="_blank" rel="noopener">ethanjunechu.github.io</a>。<br>Coding与Github类似就不啰嗦了。</p><h3 id="修改-config-yml文件"><a href="#修改-config-yml文件" class="headerlink" title="修改_config.yml文件"></a>修改_config.yml文件</h3><p>_config.yml位于blog文件夹的根目录，里面是你blog的一些基本配置，我的配置修改如下：<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment"># # Docs: http://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment"># # Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">ESERIES</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">不精独乐</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Ethan</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment"># # If your site is put in a subdirectory</span></span><br><span class="line"><span class="comment"># # set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="attr">url:</span> <span class="attr">http://ethanjunechu.coding.me</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span></span><br><span class="line"><span class="attr">skip_render:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line"><span class="attr">external_link:</span> <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  line_number:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  auto_detect:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  tab_replace:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br><span class="line"><span class="attr">category_map:</span></span><br><span class="line"><span class="attr">tag_map:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment"># # Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment"># # You can customize the date format as defined in</span></span><br><span class="line"><span class="comment"># # http://momentjs.com/docs/# /displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="attr">HH:mm:ss</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment"># # Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment"># # Plugins: http://hexo.io/plugins/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">10</span> <span class="comment">## 首页默认10篇文章标题 如果值为0不分页</span></span><br><span class="line"></span><br><span class="line"><span class="attr">archive_generator:</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">10</span> <span class="comment">## 归档页面默认10篇文章标题</span></span><br><span class="line"><span class="attr">  yearly:</span> <span class="literal">true</span>  <span class="comment">## 生成年视图</span></span><br><span class="line"><span class="attr">  monthly:</span> <span class="literal">true</span> <span class="comment">## 生成月视图</span></span><br><span class="line"></span><br><span class="line"><span class="attr">tag_generator:</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">10</span> <span class="comment">## 标签分类页面默认10篇文章</span></span><br><span class="line"></span><br><span class="line"><span class="attr">category_generator:</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">10</span> <span class="comment">### 分类页面默认10篇文章</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sitemap:</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">sitemap.xml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">atom</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">atom.xml</span></span><br><span class="line"><span class="attr">  limit:</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="attr">duoshuo_shortname:</span>   <span class="comment">## 这里填写你的多说的短网址</span></span><br><span class="line"><span class="comment"># # Themes: http://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">apollo</span>   <span class="comment">## 主题的名称,我用的是apollo,默认的是landscape</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment"># # Docs: http://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span></span><br><span class="line"><span class="attr">    github:</span> <span class="attr">https://github.com/ethanjunechu/ethanjunechu.github.io.git</span></span><br><span class="line"><span class="attr">    coding:</span> <span class="attr">https://git.coding.net/ethanjunechu/ethanjunechu.git</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></p><p>这里面基本都有注解，说一下最后的deploy(部署)分别为你的Github和Coding的发布链接，与上一步你注册的账号的repository相对应。</p><h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><p>这是最后一步，进入你的终端，进入你的blog文件夹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d -g</span><br></pre></td></tr></table></figure></p><p>之后会分别叫你输入Github和Coding的密码。</p><h3 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h3><p>发布失败有可能是隐藏文件引起的，需要删除<strong>OS X</strong>下面的隐藏文件.DS_tore。<br>主题文件就放进themes文件夹，在_config.yml里面启用就行了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一开始只准备在Github上建站，后来发现墙壁实在是太厚，偶然发现可以将hexo同时部署到Github和GitCafe，于是开始搞事儿。刚注册完GitCafe就发现它居然已经被Coding包养了，无奈又去注册了Coding。开始部署发现hexo已经升级到了3.0，找到的教程普遍都是2.0的，有些细节不太实用，再加上bash实在是不熟，搞了有点时间，所以决定部署完成第一篇就记录一下部署过程。&lt;/p&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="http://eseries.studio/tags/hexo/"/>
    
      <category term="Github" scheme="http://eseries.studio/tags/Github/"/>
    
      <category term="Coding" scheme="http://eseries.studio/tags/Coding/"/>
    
  </entry>
  
  <entry>
    <title>WaterMarker</title>
    <link href="http://eseries.studio/2013/06/13/WaterMarker/"/>
    <id>http://eseries.studio/2013/06/13/WaterMarker/</id>
    <published>2013-06-13T15:43:13.000Z</published>
    <updated>2018-02-05T08:00:42.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../WaterMarker/watermarker_black.png" alt="watermarker_black"><br><img src="../WaterMarker/watermarker_white.png" alt="watermarker_white"><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"Ethan 白色"</span> : <span class="string">"&lt;img src=https://eseries.studio/2013/06/13/WaterMarker/watermarker_white.png&gt;"</span>,</span><br><span class="line"><span class="attr">"Ethan 黑色"</span> : <span class="string">"&lt;img src=https://eseries.studio/2013/06/13/WaterMarker/watermarker_black.png&gt;"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;../WaterMarker/watermarker_black.png&quot; alt=&quot;watermarker_black&quot;&gt;&lt;br&gt;&lt;img src=&quot;../WaterMarker/watermarker_white.png&quot; alt=&quot;watermar
      
    
    </summary>
    
    
      <category term="自家用" scheme="http://eseries.studio/tags/%E8%87%AA%E5%AE%B6%E7%94%A8/"/>
    
  </entry>
  
</feed>
